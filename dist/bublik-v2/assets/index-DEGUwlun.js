import{j as e}from"./shiki-DF6cRzTV.js";import{i as E,a as l}from"./react-DysD6PZB.js";import{i as M,ba as g,bi as R,b6 as _,C as H,aw as k,o as w}from"./index-CiVuwvMy.js";import{a as F,c as L,u as D,r as G}from"./plot-list.utils-B0O3ryPA.js";import"./reactJsonView-DLIBAeRz.js";import"./echarts-lseLLy92.js";import"./monaco-D4ZTQyqC.js";import"./prettier-B8tySQOv.js";function J(){const[c]=E(),{data:s,isLoading:b,isFetching:C,error:d}=F(),{data:r,isLoading:x,isFetching:y,error:m}=L(),[a,j]=l.useState(null),[P,p]=l.useState(!1),{selectedGroup:S,selectedCharts:h,syncChartsFromData:f}=D();l.useEffect(()=>{if(!s||!r)return;const n=[...s,...r.flatMap(t=>t.measurement_series_charts)];f(n)},[s,r,f]);const u=l.useMemo(()=>{if(!s)return[];if(!r)return[];const n=[...s,...r.flatMap(o=>o.measurement_series_charts)],t=c.get("combinedPlots");if(!t)return[];const i=t.split(";").map(String);return n.filter(o=>i.includes(String(o.id))).map(o=>({...o,parameters:h.find(v=>v.plot.id===o.id)?.parameters}))},[r,s,c,h]),I=n=>{const t=u?.[n.componentIndex];if(!t)return;const i=G(t,n.dataIndex);i&&(j(i),p(!0))};return b||x?e.jsx(M,{className:"h-screen rounded-sm"}):u.length?d||m?e.jsx(g,{error:d||m}):e.jsxs(e.Fragment,{children:[a&&e.jsx(_,{runId:a?.run_id,resultId:a?.result_id,measurementId:a?.result_id,open:P,onOpenChange:p}),e.jsxs("div",{className:"bg-white rounded-md",children:[e.jsx(H,{label:"Combined"}),e.jsx("div",{className:w("p-4 h-[78vh]",(C||y)&&"pointer-events-none opacity-60"),children:e.jsx(k,{charts:u,style:{height:"100%"},onPointClick:I,enableResultErrorHighlight:S==="trend"})})]})]}):e.jsx(g,{error:R({title:"You have not selected plots",description:"You need to select multiple plots to use this page",status:400}),withoutStatus:!0})}export{J as HistoryMeasurementsCombinedContainer};
//# sourceMappingURL=index-DEGUwlun.js.map
