{"version":3,"file":"measurements-page-DwtdWcCP.js","sources":["../../../bublik-ui/libs/shared/charts/src/lib/tables-header/tables-header.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/measurement-statistics/link-to-run.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/measurement-statistics/link-to-log.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/measurement-statistics/measurement-statistics.container.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/export-chart/export-chart.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/hooks/index.ts","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/charts/charts.container.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/containers/tables/tables.container.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/mode-default.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/mode-charts.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/mode-tables.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/mode-split.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/mode-overlay.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/components/mode-picker/index.tsx","../../../bublik-ui/libs/bublik/features/measurements/src/lib/measurement.hooks.ts","../../../bublik-ui/libs/bublik/features/measurements/src/lib/measurement.container.tsx","../../../bublik-ui/apps/bublik/src/pages/measurements-page/measurements-page.tsx"],"sourcesContent":["/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { FC, ReactNode } from 'react';\n\nimport { CardHeader } from '@/shared/tailwind-ui';\n\nexport interface TableHeaderProps {\n\tchildren: ReactNode;\n}\n\nexport const TableHeader: FC<TableHeaderProps> = ({ children }) => {\n\treturn (\n\t\t<CardHeader label=\"Tables\">\n\t\t\t<div className=\"flex items-center gap-4\">{children}</div>\n\t\t</CardHeader>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { routes } from '@/router';\nimport { ButtonTw, Icon } from '@/shared/tailwind-ui';\nimport { LinkWithProject } from '@/bublik/features/projects';\n\ninterface LinkToRunProps {\n\trunId: string;\n\ttargetIterationId?: number;\n}\n\nfunction LinkToRun(props: LinkToRunProps) {\n\tconst { runId, targetIterationId } = props;\n\n\treturn (\n\t\t<ButtonTw asChild variant=\"secondary\" size=\"xss\">\n\t\t\t<LinkWithProject to={routes.run({ runId, targetIterationId })}>\n\t\t\t\t<Icon name=\"BoxArrowRight\" className=\"mr-1.5\" />\n\t\t\t\tRun\n\t\t\t</LinkWithProject>\n\t\t</ButtonTw>\n\t);\n}\n\nexport { LinkToRun };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { routes } from '@/router';\nimport { ButtonTw, Icon } from '@/shared/tailwind-ui';\nimport { LinkWithProject } from '@/bublik/features/projects';\n\nexport interface LinkToLogProps {\n\trunId: string;\n\tresultId: string;\n}\n\nexport const LinkToLog = ({ runId, resultId }: LinkToLogProps) => {\n\treturn (\n\t\t<ButtonTw asChild variant=\"secondary\" size=\"xss\">\n\t\t\t<LinkWithProject to={routes.log({ runId, focusId: resultId })}>\n\t\t\t\t<Icon name=\"BoxArrowRight\" className=\"mr-1.5\" />\n\t\t\t\tLog\n\t\t\t</LinkWithProject>\n\t\t</ButtonTw>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { FC } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { skipToken } from '@reduxjs/toolkit/query';\n\nimport { MeasurementsRouterParams } from '@/shared/types';\n\nimport {\n\tgetErrorMessage,\n\tuseGetResultInfoQuery,\n\tuseGetTreeByRunIdQuery\n} from '@/services/bublik-api';\nimport { InfoBlock } from '@/shared/charts';\nimport { CardHeader, Icon, Skeleton } from '@/shared/tailwind-ui';\n\nimport { HistoryLinkContainer } from '@/bublik/features/history-link';\nimport { LinkToRun } from './link-to-run';\nimport { LinkToLog } from './link-to-log';\nimport { CopyShortUrlButtonContainer } from '@/bublik/features/copy-url';\n\nexport interface MeasurementStatisticsLoadingProps {\n\trunId: string;\n\tresultId: string;\n\tpath?: string;\n}\n\nexport const MeasurementStatisticsLoading: FC<\n\tMeasurementStatisticsLoadingProps\n> = ({ runId, resultId, path }) => {\n\treturn (\n\t\t<div className=\"flex-shrink-0 w-full bg-white rounded-md\">\n\t\t\t<CardHeader label=\"Test result\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<LinkToRun runId={runId} targetIterationId={Number(resultId)} />\n\t\t\t\t\t<HistoryLinkContainer\n\t\t\t\t\t\trunId={Number(runId)}\n\t\t\t\t\t\tresultId={Number(resultId)}\n\t\t\t\t\t\tpath={path}\n\t\t\t\t\t/>\n\t\t\t\t\t<LinkToLog runId={runId} resultId={resultId} />\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<div className=\"py-2.5 px-4\">\n\t\t\t\t<Skeleton className=\"w-full h-full min-h-[86px] rounded\" />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport interface MeasurementStatisticsErrorProps {\n\terror?: unknown;\n}\n\nexport const MeasurementStatisticsError = ({\n\terror = {}\n}: MeasurementStatisticsErrorProps) => {\n\tconst { status, title, description } = getErrorMessage(error);\n\n\treturn (\n\t\t<div className=\"flex-shrink-0 w-full bg-white rounded-md\">\n\t\t\t<CardHeader label=\"Test result\">\n\t\t\t\t<div className=\"flex items-center gap-3\"></div>\n\t\t\t</CardHeader>\n\t\t\t<div className=\"py-2.5 px-4\">\n\t\t\t\t<div className=\"flex items-center justify-center min-h-[140px]\">\n\t\t\t\t\t<div className=\"flex gap-4\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"TriangleExclamationMark\"\n\t\t\t\t\t\t\tsize={48}\n\t\t\t\t\t\t\tclassName=\"text-text-unexpected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2 className=\"text-2xl font-bold\">\n\t\t\t\t\t\t\t\t{status} {title}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<p>{description}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const MeasurementStatisticsEmpty = () => <div>No data</div>;\n\nexport const MeasurementStatisticsContainer: FC = () => {\n\tconst { resultId, runId } = useParams<MeasurementsRouterParams>();\n\tconst { data, isLoading, error } = useGetResultInfoQuery(\n\t\tresultId ?? skipToken\n\t);\n\tconst { node } = useGetTreeByRunIdQuery(runId ?? skipToken, {\n\t\tselectFromResult: (state) => ({\n\t\t\tnode: !state.data || !resultId ? undefined : state.data.tree[resultId]\n\t\t})\n\t});\n\n\tif (!resultId || !runId) return <div>No run id or result id</div>;\n\n\tif (error) return <MeasurementStatisticsError error={error} />;\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<MeasurementStatisticsLoading\n\t\t\t\trunId={runId}\n\t\t\t\tresultId={resultId}\n\t\t\t\tpath={node?.path ?? undefined}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (!data) return <MeasurementStatisticsEmpty />;\n\n\tconst {\n\t\tname,\n\t\tobtained_result: { result_type },\n\t\tparameters,\n\t\thas_error\n\t} = data;\n\n\treturn (\n\t\t<div className=\"flex-shrink-0 w-full bg-white rounded-md\">\n\t\t\t<CardHeader label=\"Test result\">\n\t\t\t\t<div className=\"flex items-center gap-3\">\n\t\t\t\t\t<LinkToRun runId={runId} targetIterationId={Number(resultId)} />\n\t\t\t\t\t<HistoryLinkContainer\n\t\t\t\t\t\trunId={Number(runId)}\n\t\t\t\t\t\tresultId={Number(resultId)}\n\t\t\t\t\t\tpath={node?.path ?? undefined}\n\t\t\t\t\t/>\n\t\t\t\t\t<LinkToLog runId={runId} resultId={resultId} />\n\t\t\t\t\t<CopyShortUrlButtonContainer />\n\t\t\t\t</div>\n\t\t\t</CardHeader>\n\t\t\t<div className=\"py-2.5 px-4\">\n\t\t\t\t<InfoBlock\n\t\t\t\t\tname={name}\n\t\t\t\t\tobtainedResult={result_type}\n\t\t\t\t\tparameters={parameters}\n\t\t\t\t\tisError={has_error}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useGetSingleMeasurementQuery } from '@/services/bublik-api';\nimport { ExportChart } from '@/shared/charts';\n\ninterface ExportChartProps {\n\tresultId: string;\n}\n\nfunction ExportChartContainer({ resultId }: ExportChartProps) {\n\tconst { data, isError, isLoading } = useGetSingleMeasurementQuery(resultId);\n\n\treturn (\n\t\t<ExportChart\n\t\t\tplots={data?.charts}\n\t\t\tdisabled={isError}\n\t\t\tisLoading={isLoading}\n\t\t/>\n\t);\n}\n\nexport { ExportChartContainer, type ExportChartProps };\n","import { useNavigate, useSearchParams } from 'react-router-dom';\nimport {\n\tuseQueryParam,\n\tNumericArrayParam,\n\twithDefault\n} from 'use-query-params';\n\nimport { SingleMeasurementChart } from '@/services/bublik-api';\nimport { MeasurementsMode } from '@/shared/types';\n\nconst SELECTED_CHARTS_KEY = 'selectedCharts';\n\nfunction useResultSelectCharts() {\n\tconst navigate = useNavigate();\n\tconst [searchParams] = useSearchParams();\n\tconst [selectedCharts = [], setSelectedCharts] = useQueryParam(\n\t\tSELECTED_CHARTS_KEY,\n\t\twithDefault(NumericArrayParam, [])\n\t);\n\n\tconst handleOpenButtonClick = () => {\n\t\tconst nextParams = new URLSearchParams(searchParams);\n\t\tnextParams.set('mode', MeasurementsMode.Overlay);\n\t\tnavigate({ search: nextParams.toString() });\n\t};\n\n\tfunction addChart(chartId: number) {\n\t\tsetSelectedCharts((prev) => [...(prev || []), chartId]);\n\t}\n\n\tfunction removeChart(chartId: number) {\n\t\tsetSelectedCharts((prev) => (prev || []).filter((id) => id !== chartId));\n\t}\n\n\tfunction resetCharts() {\n\t\tsetSelectedCharts([]);\n\t}\n\n\tfunction handleChartClick(plot: SingleMeasurementChart) {\n\t\tif (selectedCharts.includes(plot.id)) {\n\t\t\tremoveChart(plot.id);\n\t\t} else {\n\t\t\taddChart(plot.id);\n\t\t}\n\t}\n\n\treturn {\n\t\tselectedCharts,\n\t\taddChart,\n\t\tremoveChart,\n\t\tresetCharts,\n\t\thandleChartClick,\n\t\thandleOpenButtonClick\n\t};\n}\n\nexport { useResultSelectCharts };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport {\n\tgetErrorMessage,\n\tuseGetSingleMeasurementQuery\n} from '@/services/bublik-api';\nimport { getColorByIdx } from '@/shared/charts';\nimport {\n\tSkeleton,\n\tIcon,\n\tcn,\n\tuseSidebar,\n\tToolbarButton\n} from '@/shared/tailwind-ui';\nimport { MeasurementChart } from '@/shared/charts';\n\nimport { useResultSelectCharts } from '../../hooks';\n\nexport const ChartsEmpty = () => <div>Chart is empty</div>;\n\nexport const ChartsLoading = ({ layout }: { layout: ChartsTiling }) => {\n\treturn (\n\t\t<ul className={layout === 'mosaic' ? 'chart-mosaic' : undefined}>\n\t\t\t<li className=\"py-2.5 px-4\">\n\t\t\t\t<Skeleton className=\"h-[334px] rounded\" />\n\t\t\t</li>\n\t\t\t<li className=\"py-2.5 px-4\">\n\t\t\t\t<Skeleton className=\"h-[334px] rounded\" />\n\t\t\t</li>\n\t\t\t<li className=\"py-2.5 px-4\">\n\t\t\t\t<Skeleton className=\"h-[334px] rounded\" />\n\t\t\t</li>\n\t\t\t<li className=\"py-2.5 px-4\">\n\t\t\t\t<Skeleton className=\"h-[334px] rounded\" />\n\t\t\t</li>\n\t\t</ul>\n\t);\n};\n\nexport interface ChartsErrorProps {\n\terror: unknown;\n}\n\nexport function ChartsError({ error = {} }: ChartsErrorProps) {\n\tconst { status, title, description } = getErrorMessage(error);\n\n\treturn (\n\t\t<div className=\"flex items-center justify-center gap-4 mx-4 my-20\">\n\t\t\t<Icon\n\t\t\t\tname=\"TriangleExclamationMark\"\n\t\t\t\tsize={48}\n\t\t\t\tclassName=\"text-text-unexpected\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-2xl font-bold\">\n\t\t\t\t\t{status} {title}\n\t\t\t\t</h2>\n\t\t\t\t<p>{description}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport type ChartsTiling = 'row' | 'mosaic';\n\nexport interface ChartsProps {\n\tlayout: ChartsTiling;\n\tresultId: string;\n\tisLockedMode?: boolean;\n}\n\nexport function ChartsContainer(props: ChartsProps) {\n\tconst { resultId, layout } = props;\n\tconst { isSidebarOpen } = useSidebar();\n\tconst { data, isLoading, error } = useGetSingleMeasurementQuery(resultId);\n\tconst { selectedCharts, handleChartClick } = useResultSelectCharts();\n\n\tif (isLoading) return <ChartsLoading layout={layout} />;\n\n\tif (error) return <ChartsError error={error} />;\n\n\tif (!data) return <ChartsEmpty />;\n\n\tif (layout === 'mosaic') {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'[&>li]:border-b [&>li]:border-border-primary',\n\t\t\t\t\tisSidebarOpen\n\t\t\t\t\t\t? 'min-[1465px]:chart-mosaic'\n\t\t\t\t\t\t: 'min-[1368px]:chart-mosaic'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{data.charts.map((plot, idx) => {\n\t\t\t\t\tconst state = selectedCharts.includes(plot.id) ? 'active' : 'default';\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"py-2.5 px-4\" key={plot.id}>\n\t\t\t\t\t\t\t<MeasurementChart\n\t\t\t\t\t\t\t\tkey={plot.id}\n\t\t\t\t\t\t\t\tchart={plot}\n\t\t\t\t\t\t\t\tcolor={getColorByIdx(idx)}\n\t\t\t\t\t\t\t\tadditionalToolBarItems={\n\t\t\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\t\t\taria-label=\"Add to combined chart\"\n\t\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleChartClick(plot)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"AddSymbol\" className=\"size-5\" />\n\t\t\t\t\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col children-but-last:border-b children-but-last:border-b-border-primary\">\n\t\t\t{data.charts.map((plot, idx) => {\n\t\t\t\tconst state = selectedCharts.includes(plot.id) ? 'active' : 'default';\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"py-2.5 px-4\" key={plot.id}>\n\t\t\t\t\t\t<MeasurementChart\n\t\t\t\t\t\t\tkey={plot.id}\n\t\t\t\t\t\t\tchart={plot}\n\t\t\t\t\t\t\tcolor={getColorByIdx(idx)}\n\t\t\t\t\t\t\tadditionalToolBarItems={\n\t\t\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\t\t\taria-label=\"Add to combined chart\"\n\t\t\t\t\t\t\t\t\tstate={state}\n\t\t\t\t\t\t\t\t\tonClick={() => handleChartClick(plot)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon name=\"AddSymbol\" className=\"size-5\" />\n\t\t\t\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport {\n\tgetErrorMessage,\n\tuseGetSingleMeasurementQuery\n} from '@/services/bublik-api';\nimport { MeasurementsTable } from '@/shared/charts';\nimport { Icon, Skeleton } from '@/shared/tailwind-ui';\n\nexport const TableLoading = () => (\n\t<div className=\"p-4\">\n\t\t<Skeleton className=\"w-full min-h-[700px] rounded\" />\n\t</div>\n);\n\nexport const TableEmpty = () => <div>Table is empty</div>;\n\nexport interface TableErrorProps {\n\terror: unknown;\n}\n\nexport const TableError = ({ error }: TableErrorProps) => {\n\tconst { status, title, description } = getErrorMessage(error);\n\n\treturn (\n\t\t<div className=\"flex items-center justify-center gap-4 mx-4 my-20\">\n\t\t\t<Icon\n\t\t\t\tname=\"TriangleExclamationMark\"\n\t\t\t\tsize={48}\n\t\t\t\tclassName=\"text-text-unexpected\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<h2 className=\"text-2xl font-bold\">\n\t\t\t\t\t{status} {title}\n\t\t\t\t</h2>\n\t\t\t\t<p>{description}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport interface TablesProps {\n\tresultId: string;\n}\n\nexport function TablesContainer(props: TablesProps) {\n\tconst { resultId } = props;\n\tconst { data, isLoading, error } = useGetSingleMeasurementQuery(resultId);\n\n\tif (isLoading) return <TableLoading />;\n\n\tif (error) return <TableError error={error} />;\n\n\tif (!data) return <TableEmpty />;\n\n\treturn (\n\t\t<div className=\"\">\n\t\t\t<MeasurementsTable data={data.tables} />\n\t\t</div>\n\t);\n}\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useParams } from 'react-router-dom';\n\nimport { MeasurementsRouterParams } from '@/shared/types';\nimport { CardHeader } from '@/shared/tailwind-ui';\nimport { TableHeader } from '@/shared/charts';\n\nimport {\n\tChartsContainer,\n\tExportChartContainer,\n\tMeasurementStatisticsContainer,\n\tTablesContainer\n} from '../../containers';\n\nfunction ModeDefault() {\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\n\tif (!runId || !resultId) return null;\n\n\treturn (\n\t\t<div className=\"p-2\">\n\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t<MeasurementStatisticsContainer />\n\t\t\t\t<div className={'relative transition-all bg-white rounded-md'}>\n\t\t\t\t\t<CardHeader label=\"Charts\" />\n\t\t\t\t\t<ChartsContainer layout=\"mosaic\" resultId={resultId} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t<ExportChartContainer resultId={resultId} />\n\t\t\t\t\t</TableHeader>\n\t\t\t\t\t<TablesContainer resultId={resultId} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport { ModeDefault };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useParams } from 'react-router-dom';\n\nimport { MeasurementsRouterParams } from '@/shared/types';\nimport { CardHeader } from '@/shared/tailwind-ui';\n\nimport {\n\tChartsContainer,\n\tMeasurementStatisticsContainer\n} from '../../containers';\n\nexport const ModeCharts = () => {\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\n\tif (!runId || !resultId) return null;\n\n\treturn (\n\t\t<div className=\"p-2\">\n\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t<MeasurementStatisticsContainer />\n\t\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t\t<CardHeader label=\"Charts\" />\n\t\t\t\t\t<ChartsContainer resultId={resultId} layout=\"row\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useParams } from 'react-router-dom';\n\nimport { MeasurementsRouterParams } from '@/shared/types';\nimport { TableHeader } from '@/shared/charts';\n\nimport {\n\tExportChartContainer,\n\tMeasurementStatisticsContainer,\n\tTablesContainer\n} from '../../containers';\n\nexport const ModeTables = () => {\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\n\tif (!runId || !resultId) return null;\n\n\treturn (\n\t\t<div className=\"p-2\">\n\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t<MeasurementStatisticsContainer />\n\t\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t<ExportChartContainer resultId={resultId} />\n\t\t\t\t\t</TableHeader>\n\t\t\t\t\t<TablesContainer resultId={resultId} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useParams } from 'react-router-dom';\n\nimport { CardHeader, Resizable, resizableStyles } from '@/shared/tailwind-ui';\nimport { MeasurementsRouterParams } from '@/shared/types';\nimport { TableHeader } from '@/shared/charts';\n\nimport {\n\tChartsContainer,\n\tExportChartContainer,\n\tMeasurementStatisticsContainer,\n\tTablesContainer\n} from '../../containers';\n\nexport const ModeSplit = () => {\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\n\tif (!runId || !resultId) return null;\n\n\treturn (\n\t\t<div className=\"h-screen p-2 overflow-hidden\">\n\t\t\t<div className=\"flex flex-col h-full gap-1\">\n\t\t\t\t<MeasurementStatisticsContainer />\n\t\t\t\t<div className=\"flex gap-1 overflow-hidden\">\n\t\t\t\t\t<Resizable\n\t\t\t\t\t\t{...resizableStyles}\n\t\t\t\t\t\tdefaultSize={{ width: '50%', height: '100%' }}\n\t\t\t\t\t\tenable={{ right: true }}\n\t\t\t\t\t\tmaxWidth=\"70%\"\n\t\t\t\t\t\tminWidth={500}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"flex flex-col flex-grow w-full h-full overflow-hidden bg-white rounded-md\">\n\t\t\t\t\t\t\t<CardHeader label=\"Charts\" />\n\t\t\t\t\t\t\t<div className=\"overflow-x-hidden overflow-y-auto no-bg-scrollbar\">\n\t\t\t\t\t\t\t\t<ChartsContainer layout=\"row\" resultId={resultId} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Resizable>\n\n\t\t\t\t\t<div className=\"flex flex-col flex-grow w-full h-full overflow-hidden bg-white rounded-md\">\n\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t<ExportChartContainer resultId={resultId} />\n\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t<div className=\"overflow-x-hidden overflow-y-auto no-bg-scrollbar\">\n\t\t\t\t\t\t\t<TablesContainer resultId={resultId} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import { useParams } from 'react-router-dom';\n\nimport { useGetSingleMeasurementQuery } from '@/services/bublik-api';\nimport { MeasurementsRouterParams } from '@/shared/types';\nimport { CardHeader, Skeleton } from '@/shared/tailwind-ui';\nimport { StackedMeasurementChart } from '@/shared/charts';\n\nimport { MeasurementStatisticsContainer } from '../../containers';\nimport { useResultSelectCharts } from '../../hooks';\nimport { useMemo } from 'react';\n\nfunction ModeOverlay() {\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\n\tif (!runId || !resultId) return null;\n\n\treturn (\n\t\t<div className=\"p-2 h-full\">\n\t\t\t<div className=\"flex flex-col gap-1 h-full\">\n\t\t\t\t<MeasurementStatisticsContainer />\n\t\t\t\t<div className=\"relative transition-all bg-white rounded-md h-[120vh]\">\n\t\t\t\t\t<CardHeader label=\"Charts\" />\n\t\t\t\t\t<div className=\"h-full p-4\">\n\t\t\t\t\t\t<OverlayContainer resultId={resultId} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface OverlayContainerProps {\n\tresultId: string;\n}\n\nfunction OverlayContainer({ resultId }: OverlayContainerProps) {\n\tconst { data, isLoading, error } = useGetSingleMeasurementQuery(resultId);\n\tconst { selectedCharts } = useResultSelectCharts();\n\n\tconst charts = useMemo(() => {\n\t\tif (!selectedCharts.length) return data?.charts;\n\t\treturn data?.charts?.filter((chart) => selectedCharts.includes(chart.id));\n\t}, [data?.charts, selectedCharts]);\n\n\tif (error) return <div>Error...</div>;\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div className=\"p-2 h-full\">\n\t\t\t\t<Skeleton className=\"h-full rounded-md\" />\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!data || !charts?.length) return <div>No Data!</div>;\n\n\treturn <StackedMeasurementChart charts={charts} style={{ height: '100%' }} />;\n}\n\nexport { ModeOverlay };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { skipToken } from '@reduxjs/toolkit/query';\nimport { useParams } from 'react-router-dom';\n\nimport { useGetSingleMeasurementQuery } from '@/services/bublik-api';\nimport { getColorByIdx, SelectedChartsPopover } from '@/shared/charts';\nimport { MeasurementsMode, MeasurementsRouterParams } from '@/shared/types';\n\nimport { ModeDefault } from './mode-default';\nimport { ModeCharts } from './mode-charts';\nimport { ModeTables } from './mode-tables';\nimport { ModeSplit } from './mode-split';\nimport { ModeOverlay } from './mode-overlay';\nimport { useResultSelectCharts } from '../../hooks';\n\nconst modeMap = {\n\t[MeasurementsMode.Charts]: ModeCharts,\n\t[MeasurementsMode.Split]: ModeSplit,\n\t[MeasurementsMode.Tables]: ModeTables,\n\t[MeasurementsMode.Overlay]: ModeOverlay,\n\t[MeasurementsMode.Default]: ModeDefault\n};\n\nexport interface ModePickerProps {\n\tmode?: MeasurementsMode;\n}\n\nexport const ModePicker = ({ mode }: ModePickerProps) => {\n\tconst Component = modeMap[mode ?? MeasurementsMode.Default];\n\n\treturn (\n\t\t<>\n\t\t\t<Component />\n\t\t\t<SelectedChartsContainer />\n\t\t</>\n\t);\n};\n\nfunction SelectedChartsContainer() {\n\tconst { resultId } = useParams<MeasurementsRouterParams>();\n\tconst { selectedCharts, resetCharts, removeChart, handleOpenButtonClick } =\n\t\tuseResultSelectCharts();\n\tconst { data } = useGetSingleMeasurementQuery(resultId ?? skipToken);\n\n\treturn (\n\t\t<SelectedChartsPopover\n\t\t\topen={!!selectedCharts.length}\n\t\t\tlabel=\"Combined\"\n\t\t\tplots={\n\t\t\t\tdata?.charts\n\t\t\t\t\t?.filter((chart) => selectedCharts.includes(chart.id))\n\t\t\t\t\t?.map((chart, idx) => ({\n\t\t\t\t\t\tplot: chart,\n\t\t\t\t\t\tcolor: getColorByIdx(idx)\n\t\t\t\t\t})) ?? []\n\t\t\t}\n\t\t\tonResetButtonClick={resetCharts}\n\t\t\tonRemoveClick={(plot) => removeChart(plot.id)}\n\t\t\tonOpenButtonClick={handleOpenButtonClick}\n\t\t/>\n\t);\n}\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { formatTimeToDot } from '@/shared/utils';\nimport { useTabTitleWithPrefix } from '@/bublik/features/projects';\n\nexport type useMeasurementTitleConfig = {\n\tname?: string;\n\tstart?: string;\n\trunId?: string;\n};\n\nexport const useMeasurementTitle = ({\n\tname,\n\tstart,\n\trunId\n}: useMeasurementTitleConfig) => {\n\tconst formattedTime = start ? formatTimeToDot(start) : '';\n\n\tuseTabTitleWithPrefix([name, formattedTime, runId, 'Measurements - Bublik']);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useParams } from 'react-router-dom';\nimport { skipToken } from '@reduxjs/toolkit/query';\n\nimport { MeasurementsRouterParams, MeasurementsSearch } from '@/shared/types';\nimport { useSearchState } from '@/router';\nimport {\n\tuseGetResultInfoQuery,\n\tusePrefetchLogPage,\n\tusePrefetchRun\n} from '@/services/bublik-api';\nimport { ScrollToTopPage } from '@/shared/tailwind-ui';\n\nimport { ModePicker } from './components';\nimport { useMeasurementTitle } from './measurement.hooks';\n\nexport const MeasurementContainer = () => {\n\tconst [search] = useSearchState<MeasurementsSearch>();\n\tconst { runId, resultId } = useParams<MeasurementsRouterParams>();\n\tconst { data } = useGetResultInfoQuery(resultId ?? skipToken);\n\n\tuseMeasurementTitle({\n\t\tname: data?.name,\n\t\tstart: data?.start,\n\t\trunId\n\t});\n\tusePrefetchRun({ runId });\n\tusePrefetchLogPage({ runId, resultId });\n\n\treturn (\n\t\t<>\n\t\t\t<ModePicker mode={search?.mode} />\n\t\t\t<ScrollToTopPage />\n\t\t</>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { MeasurementContainer } from '@/bublik/features/measurements';\n\nexport const MeasurementsPage = () => {\n\treturn <MeasurementContainer />;\n};\n"],"names":["TableHeader","children","jsx","CardHeader","LinkToRun","props","runId","targetIterationId","ButtonTw","jsxs","LinkWithProject","routes","Icon","LinkToLog","resultId","MeasurementStatisticsLoading","path","HistoryLinkContainer","Skeleton","MeasurementStatisticsError","error","status","title","description","getErrorMessage","MeasurementStatisticsEmpty","MeasurementStatisticsContainer","useParams","data","isLoading","useGetResultInfoQuery","skipToken","node","useGetTreeByRunIdQuery","state","name","result_type","parameters","has_error","CopyShortUrlButtonContainer","InfoBlock","ExportChartContainer","isError","useGetSingleMeasurementQuery","ExportChart","SELECTED_CHARTS_KEY","useResultSelectCharts","navigate","useNavigate","searchParams","useSearchParams","selectedCharts","setSelectedCharts","useQueryParam","withDefault","NumericArrayParam","handleOpenButtonClick","nextParams","MeasurementsMode","addChart","chartId","prev","removeChart","id","resetCharts","handleChartClick","plot","ChartsEmpty","ChartsLoading","layout","ChartsError","ChartsContainer","isSidebarOpen","useSidebar","cn","idx","MeasurementChart","getColorByIdx","ToolbarButton","TableLoading","TableEmpty","TableError","TablesContainer","MeasurementsTable","ModeDefault","ModeCharts","ModeTables","ModeSplit","Resizable","resizableStyles","ModeOverlay","OverlayContainer","charts","useMemo","chart","StackedMeasurementChart","modeMap","ModePicker","mode","Component","Fragment","SelectedChartsContainer","SelectedChartsPopover","useMeasurementTitle","start","formattedTime","formatTimeToDot","useTabTitleWithPrefix","MeasurementContainer","search","useSearchState","usePrefetchRun","usePrefetchLogPage","ScrollToTopPage","MeasurementsPage"],"mappings":"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"}