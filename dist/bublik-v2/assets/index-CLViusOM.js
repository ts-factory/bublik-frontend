import{j as e}from"./shiki-BV2GtVUq.js";import{a as y}from"./react-BSMx3yqy.js";import{b1 as j,b2 as b,b3 as N,b4 as w,b5 as L,o as T}from"./index-Dl0N3GU2.js";import"./reactJsonView-KCeSiE7A.js";import"./echarts-lseLLy92.js";import"./monaco-CpmLxh5C.js";import"./prettier-BE4rBlSX.js";const A=r=>r.map(a=>{const m=a.entries.filter(l=>l.aggr!=="single").map(l=>({units:l.base_units,value:l.value,multiplier:l.multiplier,aggr:l.aggr}));return{parameterName:a.description,values:a.entries.filter(l=>l.aggr==="single").map(l=>({units:l.base_units,value:l.value,multiplier:l.multiplier,aggr:l.aggr})),statistics:m}}),C=r=>{const{results:a,views:m}=r,l=s=>{const{axis:t,results:c}=s;if(t.name==="auto-seqno"){const o=c.map(v=>v.entries.length).reduce((v,f)=>Math.max(v,f)),g=Array.from({length:o},(v,f)=>f);return{resultType:"auto-seqno",axis:{type:"value",scale:!0,min:0,max:o-1},data:g}}const p=c.find(o=>o.type===t.type),i=p?.entries?.[0]?.base_units,n=p?.entries?.map(o=>Number(o.value)*Number(o.multiplier))||[],u=Math.min(...n),d=Math.max(...n);return{resultType:t.type,axis:{type:"value",scale:!0,min:u,max:d,axisLabel:{formatter:`{value} ${i}`}},data:n}},x=s=>{const{xAxisResultType:t,axis:c,results:p}=s;return c?c.map(i=>{const n=p.find(u=>u.type===i.type&&u.name===i.name)?.entries[0]?.base_units;return{type:i.type,axis:{type:"value",name:i.name,scale:!0,position:"left",alignTicks:!0,axisLine:{show:!0,lineStyle:{}},axisLabel:{formatter:`{value} ${n}`}}}}):p.filter(i=>i.type!==t).map(i=>{const n=i.entries?.[0]?.base_units;return{type:i.type,axis:{type:"value",name:i.name,position:"left",scale:!0,alignTicks:!0,min:u=>u.min*.9,max:u=>u.max*1.1,nameTextStyle:{opacity:0},axisLine:{show:!0,lineStyle:{}},axisLabel:{formatter:`{value} ${n}`}}}})},h=s=>s.yAxises.map(t=>{const c=s.results.find(n=>n.type===t.type&&n.name===t.axis.name);if(!c)return{name:t.axis.name||(t.type?j(t.type):""),type:"line",data:[]};const i=c.entries.filter(n=>n.aggr==="single").map(n=>Number(n.value)*Number(n.multiplier)).map((n,u)=>[u<s.xAxisData.length?s.xAxisData[u]:u,n]);return{name:t.axis.name||(t.type?j(t.type):""),type:"line",data:i}});return m.map(s=>{const{title:t,axis_x:c,axis_y:p}=s,i=l({axis:c,results:a}),n=x({axis:p,results:a,xAxisResultType:i.resultType}),u=h({xAxisData:i.data,yAxises:n,results:a}),d=[];return u.forEach(o=>{const g=o.data;g.length!==i.data.length&&d.push(`Parameter '${o.name}' on axis Y has ${g.length} values while on axis X there is ${i.data.length} values.`)}),{title:t,xAxis:i.axis,yAxises:n.map(o=>o.axis),series:u,legends:u.map(o=>o.name),errors:d}})},M=r=>e.jsx("ul",{className:"flex flex-col gap-4",children:r.items.map(a=>e.jsx("li",{children:e.jsx(R,{parameterName:a.parameterName,values:a.values,statistics:a.statistics})},a.parameterName))}),R=r=>{const{parameterName:a,values:m,statistics:l}=r,[x,h]=L();return e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold",children:['Measured parameter: "',a,'"']}),l&&l.length?e.jsxs("div",{className:"pl-10",children:[e.jsx("span",{className:"block font-bold",children:"Statistics:"}),e.jsx("ul",{className:"pl-4",children:l.map((s,t)=>e.jsxs("li",{children:[s.aggr,": ",s.value," * ",s.multiplier," ",s.units]},t))})]}):null,e.jsxs("div",{className:"pl-10",children:[e.jsx("span",{className:"block font-bold",children:"Values:"}),e.jsx("button",{onClick:h,className:T("hover:underline pl-4",x&&"text-text-unexpected",!x&&"text-primary"),children:x?`Hide ${m.length} values`:`Show ${m.length} values`}),e.jsx("ul",{className:"pl-10",children:x?m.map((s,t)=>e.jsxs("li",{children:[s.value," * ",s.multiplier," ",s.units]},t)):null})]})]})},_=r=>e.jsx("ul",{className:"flex flex-col gap-4",children:r.charts.map(a=>e.jsx("li",{children:e.jsx($,{config:a})},a.title))}),$=r=>{const{series:a,title:m,xAxis:l,yAxises:x,legends:h,errors:s}=r.config;return e.jsxs("div",{className:"bg-white py-4 rounded-md",children:[e.jsx("h2",{className:"font-bold text-center",children:m}),e.jsx(b,{option:{toolbox:{feature:{dataView:{show:!0,readOnly:!1},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"inside",show:!0},{show:!0,type:"slider",height:20}],grid:{containLabel:!0},tooltip:{trigger:"axis"},legend:{data:h},xAxis:l,yAxis:x,series:a},theme:N.theme}),s.length?e.jsx("ul",{className:"flex flex-col gap-2",children:s.map((t,c)=>e.jsx("li",{className:"text-text-unexpected",children:t},c))}):null]})},X=r=>{const a=y.useMemo(()=>A(r.results),[r.results]),m=y.useMemo(()=>C({results:r.results,views:r.views}),[r.results,r.views]);return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("h1",{className:"font-bold",children:["Measurements from tool ",r.tool.toLowerCase()]}),e.jsx(M,{items:a}),e.jsx(_,{charts:m}),e.jsx(w,{src:r})]})};export{$ as Chart,_ as ChartList,X as LogMiChart,R as ResultDescription,M as ResultDescriptionList};
//# sourceMappingURL=index-CLViusOM.js.map
