{"version":3,"file":"index-Cz6JnkhS.js","sources":["../../../bublik-ui/node_modules/.pnpm/date-fns@2.30.0/node_modules/date-fns/esm/startOfWeek/index.js","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/runs-stats.hooks.ts","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/runs-stats.component.utils.ts","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/components/runs-list.component.tsx","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/components/conclusion-section.component.tsx","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/components/test-section.component.tsx","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/components/day-section.component.tsx","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/runs-stats.component.tsx","../../../bublik-ui/libs/bublik/features/runs/src/lib/runs-stats/runs-stats.container.tsx"],"sourcesContent":["import toDate from \"../toDate/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport { getDefaultOptions } from \"../_lib/defaultOptions/index.js\";\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @param {Date|Number} date - the original date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the start of a week\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport default function startOfWeek(dirtyDate, options) {\n  var _ref, _ref2, _ref3, _options$weekStartsOn, _options$locale, _options$locale$optio, _defaultOptions$local, _defaultOptions$local2;\n  requiredArgs(1, arguments);\n  var defaultOptions = getDefaultOptions();\n  var weekStartsOn = toInteger((_ref = (_ref2 = (_ref3 = (_options$weekStartsOn = options === null || options === void 0 ? void 0 : options.weekStartsOn) !== null && _options$weekStartsOn !== void 0 ? _options$weekStartsOn : options === null || options === void 0 ? void 0 : (_options$locale = options.locale) === null || _options$locale === void 0 ? void 0 : (_options$locale$optio = _options$locale.options) === null || _options$locale$optio === void 0 ? void 0 : _options$locale$optio.weekStartsOn) !== null && _ref3 !== void 0 ? _ref3 : defaultOptions.weekStartsOn) !== null && _ref2 !== void 0 ? _ref2 : (_defaultOptions$local = defaultOptions.locale) === null || _defaultOptions$local === void 0 ? void 0 : (_defaultOptions$local2 = _defaultOptions$local.options) === null || _defaultOptions$local2 === void 0 ? void 0 : _defaultOptions$local2.weekStartsOn) !== null && _ref !== void 0 ? _ref : 0);\n\n  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setDate(date.getDate() - diff);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useMemo } from 'react';\nimport { skipToken } from '@reduxjs/toolkit/query';\n\nimport { RUN_STATUS, RunsAPIQuery } from '@/shared/types';\nimport { useGetRunsTablePageQuery } from '@/services/bublik-api';\n\nimport { useRunsQuery } from '../hooks';\n\nexport const useRunsStats = () => {\n\tconst { query: searchQuery } = useRunsQuery();\n\n\tconst query = useGetRunsTablePageQuery(searchQuery);\n\n\tconst calculatedQuery: RunsAPIQuery | typeof skipToken = query.data\n\t\t? {\n\t\t\t\t...searchQuery,\n\t\t\t\tpage: '1',\n\t\t\t\tpageSize: String(query.data.pagination.count)\n\t\t  }\n\t\t: skipToken;\n\n\tconst finalQuery = useGetRunsTablePageQuery(calculatedQuery);\n\n\tconst data = useMemo(() => {\n\t\tif (!finalQuery.data) return undefined;\n\n\t\treturn finalQuery.data.results.map(({ stats, start, conclusion, id }) => {\n\t\t\treturn {\n\t\t\t\trunId: String(id),\n\t\t\t\trunStatus: conclusion as RUN_STATUS,\n\t\t\t\ttotal: stats.tests_total,\n\t\t\t\tnok: stats.tests_total_nok,\n\t\t\t\tnokPercent: stats.tests_total_nok_percent,\n\t\t\t\tok: stats.tests_total_ok,\n\t\t\t\tokPercent: stats.tests_total_ok_percent,\n\t\t\t\tplanPercent: stats.tests_total_plan_percent,\n\t\t\t\tpassrate: Number(\n\t\t\t\t\t((stats.tests_total_ok / stats.tests_total) * 100).toFixed(2)\n\t\t\t\t),\n\t\t\t\tdate: new Date(start)\n\t\t\t};\n\t\t});\n\t}, [finalQuery.data]);\n\n\treturn {\n\t\tisLoading: query.isLoading || finalQuery.isLoading,\n\t\tisFetching: query.isFetching || finalQuery.isFetching,\n\t\tstats: data,\n\t\tqueryData: finalQuery.data,\n\t\terror: query.error || finalQuery.error\n\t} as const;\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { startOfWeek } from 'date-fns';\nimport { groupBy } from 'remeda';\n\nimport { getRunStatusInfo } from '@/shared/tailwind-ui';\nimport { RUN_STATUS } from '@/shared/types';\n\nimport { GroupedStats, RunStats, TestGroupedByWeek } from './runs-stats.types';\n\nexport const COLOR_MAP = new Map<string, string>([\n\t['ok', '#65cd84'],\n\t['nok', '#f95c78'],\n\t['total', '#7283e2']\n]);\n\nexport const getPieChartDataForResults = (runStats: RunStats[]) => {\n\ttype ObjectKeysWithType<T, U> = {\n\t\t[K in keyof T]: T[K] extends U ? K : never;\n\t};\n\n\ttype KeysWithNumberValue<T> = ObjectKeysWithType<T, number>[keyof T];\n\n\tconst calcTotal =\n\t\t(key: KeysWithNumberValue<RunStats>) =>\n\t\t(acc: { name: string; value: number }, curr: RunStats) => {\n\t\t\tacc.value += curr[key];\n\t\t\treturn acc;\n\t\t};\n\n\tconst ok = runStats.reduce(calcTotal('ok'), { name: 'OK', value: 0 });\n\tconst nok = runStats.reduce(calcTotal('nok'), { name: 'NOK', value: 0 });\n\n\treturn [ok, nok];\n};\n\nexport const getPieChartDataByRunStatus = (stats: RunStats[]) => {\n\tconst groupedByStatus = groupBy(stats, (stats) => stats.runStatus);\n\n\treturn Object.entries(groupedByStatus).map(([status, stats]) => {\n\t\tconst { label } = getRunStatusInfo(status as RUN_STATUS);\n\n\t\treturn { name: label.toUpperCase(), value: stats.length };\n\t});\n};\n\nexport const getGroupedByWeek = (stats: RunStats[]): TestGroupedByWeek[] => {\n\tconst groupedBy = groupBy(stats, (stats) =>\n\t\tstartOfWeek(stats.date).toISOString()\n\t);\n\n\treturn Object.entries(groupedBy).map(([date, stats]) => {\n\t\tconst nokNumber = stats.reduce((acc, curr) => acc + curr.nok, 0);\n\t\tconst totalNumber = stats.reduce((acc, curr) => acc + curr.total, 0);\n\t\tconst okNumber = stats.reduce((acc, curr) => acc + curr.ok, 0);\n\n\t\treturn {\n\t\t\tdate: new Date(date),\n\t\t\ttotal: totalNumber,\n\t\t\tok: okNumber,\n\t\t\tnok: nokNumber,\n\t\t\tpassrate: Number(((okNumber / totalNumber) * 100).toFixed(2)),\n\t\t\tids: stats.map((s) => s.runId).join(',')\n\t\t};\n\t});\n};\n\nexport const getRunStatus = (stats: RunStats[], group: 'day' | 'week') => {\n\tconst grouped = groupBy(stats, (stats) =>\n\t\tgroup === 'week'\n\t\t\t? startOfWeek(stats.date).toISOString()\n\t\t\t: stats.date.toISOString()\n\t);\n\n\tconst runStatusByWeek = Object.entries(grouped).reduce<GroupedStats[]>(\n\t\t(acc, [date, curr]) => {\n\t\t\tconst runStatuses = curr.map((stats) => stats.runStatus);\n\t\t\tconst uniqueRunStatuses = Array.from(new Set(runStatuses));\n\n\t\t\tconst result = {\n\t\t\t\tdate: new Date(date),\n\t\t\t\t[RUN_STATUS.Busy]: 0,\n\t\t\t\t[RUN_STATUS.Compromised]: 0,\n\t\t\t\t[RUN_STATUS.Error]: 0,\n\t\t\t\t[RUN_STATUS.Interrupted]: 0,\n\t\t\t\t[RUN_STATUS.Ok]: 0,\n\t\t\t\t[RUN_STATUS.Running]: 0,\n\t\t\t\t[RUN_STATUS.Stopped]: 0,\n\t\t\t\t[RUN_STATUS.Warning]: 0,\n\t\t\t\tids: curr.map((c) => c.runId).join(',')\n\t\t\t} satisfies GroupedStats;\n\n\t\t\tuniqueRunStatuses.forEach(\n\t\t\t\t(runStatus) =>\n\t\t\t\t\t(result[runStatus] = runStatuses.filter(\n\t\t\t\t\t\t(v) => v === runStatus\n\t\t\t\t\t).length)\n\t\t\t);\n\n\t\t\tObject.values(RUN_STATUS).forEach((status) => {\n\t\t\t\tif (Object.keys(result).includes(status)) return;\n\n\t\t\t\tresult[status] = 0;\n\t\t\t});\n\n\t\t\treturn [...acc, result];\n\t\t},\n\t\t[]\n\t);\n\n\tconst presentStatuses = Object.values(RUN_STATUS).filter((status) =>\n\t\trunStatusByWeek.some((st) => st[status] !== 0)\n\t);\n\n\treturn { grouped: runStatusByWeek, statuses: presentStatuses };\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { ComponentProps } from 'react';\n\nimport { useGetRunDetailsQuery } from '@/services/bublik-api';\nimport {\n\tcn,\n\tDialog,\n\tgetRunStatusInfo,\n\tIcon,\n\tModalContent,\n\tSkeleton\n} from '@/shared/tailwind-ui';\nimport { parseDetailDate } from '@/shared/utils';\n\nimport { useRunsStats } from '../runs-stats.hooks';\nimport { RunLinks } from '../../runs-table/columns';\n\ninterface RunsListModal {\n\topen: ComponentProps<typeof Dialog>['open'];\n\tonOpenChange: ComponentProps<typeof Dialog>['onOpenChange'];\n\tids: string[];\n}\n\nexport const RunsListModal = ({ ids, open, onOpenChange }: RunsListModal) => {\n\tconst { queryData } = useRunsStats();\n\n\tif (!queryData || !ids.length) return null;\n\n\tconst filteredResults = queryData.results.filter((f) =>\n\t\tids.includes(String(f.id))\n\t);\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onOpenChange}>\n\t\t\t<ModalContent className=\"bg-white rounded-lg p-4 overflow-auto relative max-w-2xl\">\n\t\t\t\t<button\n\t\t\t\t\taria-label=\"Close modal\"\n\t\t\t\t\tclassName=\"rounded-md hover:bg-primary-wash p-1 absolute right-4 top-4 text-text-menu hover:text-primary\"\n\t\t\t\t\tonClick={() => onOpenChange?.(false)}\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"Cross\" size={14} />\n\t\t\t\t</button>\n\t\t\t\t<h2 className=\"text-2xl font-bold leading-tight tracking-tight text-text-primary mb-2.5\">\n\t\t\t\t\tRun List\n\t\t\t\t</h2>\n\t\t\t\t<ul className=\"flex flex-col gap-4\">\n\t\t\t\t\t{filteredResults.map((result) => (\n\t\t\t\t\t\t<li key={result.id}>\n\t\t\t\t\t\t\t<RunsListModalItemContainer runId={String(result.id)} />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</ModalContent>\n\t\t</Dialog>\n\t);\n};\n\nexport interface RunsListModalItemContainerProps {\n\trunId: string;\n}\n\nconst RunsListModalItemContainer = ({\n\trunId\n}: RunsListModalItemContainerProps) => {\n\tconst query = useGetRunDetailsQuery(runId);\n\n\tif (query.error) {\n\t\treturn <div>Something went wrong!</div>;\n\t}\n\n\tif (query.isLoading) {\n\t\treturn <Skeleton className=\"rounded-md w-full h-16\" />;\n\t}\n\n\tif (!query.data) {\n\t\treturn <div>No data present!</div>;\n\t}\n\n\tconst { bg, color, icon } = getRunStatusInfo(query.data.conclusion);\n\n\treturn (\n\t\t<div className=\"flex\">\n\t\t\t<div\n\t\t\t\tclassName={cn('grid place-items-center rounded-l-md w-6', bg, color)}\n\t\t\t>\n\t\t\t\t{icon}\n\t\t\t</div>\n\t\t\t<div className=\"flex items-center justify-between flex-1 gap-4 py-1 pl-2 pr-4 border-r rounded-r-md border-y border-border-primary\">\n\t\t\t\t<div className=\"flex flex-col justify-center\">\n\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t<span className=\"col-start-1 row-1 text-[0.6875rem] font-medium leading-[0.875rem] text-text-menu\">\n\t\t\t\t\t\t\tName:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<span className=\"col-start-3 row-1 text-[0.6875rem] font-medium leading-[0.875rem]\">\n\t\t\t\t\t\t\t{query.data.main_package}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t<span className=\"col-start-1 row-1 text-[0.6875rem] font-medium leading-[0.875rem] text-text-menu\">\n\t\t\t\t\t\t\tStart:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<span className=\"col-start-3 row-1 text-[0.6875rem] font-medium leading-[0.875rem]\">\n\t\t\t\t\t\t\t{parseDetailDate(query.data.start)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<RunLinks runId={Number(runId)} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { ECElementEvent } from 'echarts';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport ReactEChartsCore from 'echarts-for-react/lib/core';\n\nimport { BarChart, PieChart } from '@/shared/charts';\nimport { getRunStatusInfo } from '@/shared/tailwind-ui';\nimport { RUN_STATUS } from '@/shared/types';\n\nimport {\n\tgetPieChartDataByRunStatus,\n\tgetRunStatus\n} from '../runs-stats.component.utils';\nimport { GroupedStatsSchema, RunStats } from '../runs-stats.types';\nimport { RunsListModal } from './runs-list.component';\n\nexport interface ConclusionSectionProps {\n\tstats: RunStats[];\n}\n\nexport const ConclusionSection = ({ stats }: ConclusionSectionProps) => {\n\tconst { grouped, statuses } = getRunStatus(stats, 'week');\n\tconst pieData = getPieChartDataByRunStatus(stats);\n\tconst pieRef = useRef<ReactEChartsCore>(null);\n\tconst barRef = useRef<ReactEChartsCore>(null);\n\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [runIds, setRunIds] = useState<string[]>([]);\n\n\tconst handleOpenChange = (open: boolean) => {\n\t\tif (!open) setRunIds([]);\n\n\t\tsetIsModalOpen(open);\n\t};\n\n\tconst handlePieChartClick = useCallback(\n\t\t(params: ECElementEvent) => {\n\t\t\tsetIsModalOpen(true);\n\n\t\t\tsetRunIds(\n\t\t\t\tstats\n\t\t\t\t\t.filter((s) => s.runStatus === `run-${params.name.toLowerCase()}`)\n\t\t\t\t\t.map((s) => s.runId)\n\t\t\t);\n\t\t},\n\t\t[stats]\n\t);\n\n\tconst handleBarChartClick = useCallback(\n\t\t(params: ECElementEvent) => {\n\t\t\tif (!params.seriesName) return;\n\n\t\t\tconst { ids: rawIds } = GroupedStatsSchema.parse(params.data);\n\t\t\tconst allIdsInGroup = rawIds.split(',');\n\n\t\t\tconst clickedStatus =\n\t\t\t\t`run-${params.seriesName.toLowerCase()}` as RUN_STATUS;\n\n\t\t\tconst filteredIds = stats\n\t\t\t\t.filter(\n\t\t\t\t\t(s) =>\n\t\t\t\t\t\ts.runStatus === clickedStatus && allIdsInGroup.includes(s.runId)\n\t\t\t\t)\n\t\t\t\t.map((s) => s.runId);\n\n\t\t\tsetIsModalOpen(true);\n\t\t\tsetRunIds(filteredIds);\n\t\t},\n\t\t[stats]\n\t);\n\n\tuseEffect(() => {\n\t\tpieRef.current?.getEchartsInstance()?.on('click', handlePieChartClick);\n\t}, [handlePieChartClick]);\n\n\tuseEffect(() => {\n\t\tbarRef.current?.getEchartsInstance()?.on('click', handleBarChartClick);\n\t}, [handleBarChartClick]);\n\n\treturn (\n\t\t<section className=\"flex items-center chart-mosaic\">\n\t\t\t<RunsListModal\n\t\t\t\tids={runIds}\n\t\t\t\topen={isModalOpen}\n\t\t\t\tonOpenChange={handleOpenChange}\n\t\t\t/>\n\t\t\t<div className=\"w-1/2 px-4 py-2\">\n\t\t\t\t<PieChart\n\t\t\t\t\ttitle=\"Runs by conclusion\"\n\t\t\t\t\tlabel=\"Runs\"\n\t\t\t\t\tdataset={{ source: pieData }}\n\t\t\t\t\tlegend={{ orient: 'vertical', left: 0, top: 0 }}\n\t\t\t\t\tseries={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'pie',\n\t\t\t\t\t\t\tlabel: { formatter: '{b} ({d}%)' },\n\t\t\t\t\t\t\titemStyle: {\n\t\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\t\tborderColor: '#fff',\n\t\t\t\t\t\t\t\tcolor: (params) =>\n\t\t\t\t\t\t\t\t\tgetRunStatusInfo(\n\t\t\t\t\t\t\t\t\t\t`run-${params.name.toLowerCase()}` as RUN_STATUS\n\t\t\t\t\t\t\t\t\t).bgRaw\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tencode: {\n\t\t\t\t\t\t\t\tvalue: 'value',\n\t\t\t\t\t\t\t\ttooltip: 'value',\n\t\t\t\t\t\t\t\titemName: 'name'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tref={pieRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"w-1/2 px-4 py-2\">\n\t\t\t\t<BarChart\n\t\t\t\t\ttitle=\"Run conclusions by week\"\n\t\t\t\t\tdataset={{ source: grouped }}\n\t\t\t\t\tlegend={{}}\n\t\t\t\t\txAxis={{ type: 'time', name: 'Date' }}\n\t\t\t\t\tyAxis={{ type: 'value', name: 'Runs' }}\n\t\t\t\t\tseries={statuses.map((status) => {\n\t\t\t\t\t\tconst { label, bgRaw } = getRunStatusInfo(status);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tname: label.toUpperCase(),\n\t\t\t\t\t\t\tcolor: bgRaw,\n\t\t\t\t\t\t\tencode: { x: 'date', y: status },\n\t\t\t\t\t\t\tstack: 'run',\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t};\n\t\t\t\t\t})}\n\t\t\t\t\tref={barRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useEffect, useRef, useState } from 'react';\nimport { ECElementEvent } from 'echarts';\nimport ReactEChartsCore from 'echarts-for-react/lib/core';\n\nimport { BarChart, PieChart } from '@/shared/charts';\n\nimport {\n\tCOLOR_MAP,\n\tgetGroupedByWeek,\n\tgetPieChartDataForResults\n} from '../runs-stats.component.utils';\nimport { RunStats, TestByWeekDaySchema } from '../runs-stats.types';\nimport { RunsListModal } from './runs-list.component';\n\ninterface TestsSectionProps {\n\tstats: RunStats[];\n}\n\nexport const TestsSection = ({ stats }: TestsSectionProps) => {\n\tconst barRef = useRef<ReactEChartsCore>(null);\n\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [runIds, setRunIds] = useState<string[]>([]);\n\n\tconst handleOpenChange = (open: boolean) => {\n\t\tif (!open) setRunIds([]);\n\n\t\tsetIsModalOpen(open);\n\t};\n\n\tconst handleBarChartClick = (params: ECElementEvent) => {\n\t\tconst { ids } = TestByWeekDaySchema.parse(params.value);\n\t\tconst runIds = ids.split(',');\n\n\t\tsetRunIds(runIds);\n\t\tsetIsModalOpen(true);\n\t};\n\n\tuseEffect(() => {\n\t\tbarRef.current?.getEchartsInstance()?.on('click', handleBarChartClick);\n\t}, []);\n\n\treturn (\n\t\t<section className=\"flex items-center chart-mosaic\">\n\t\t\t<RunsListModal\n\t\t\t\tids={runIds}\n\t\t\t\topen={isModalOpen}\n\t\t\t\tonOpenChange={handleOpenChange}\n\t\t\t/>\n\t\t\t<div className=\"w-1/2 px-4 py-2\">\n\t\t\t\t<PieChart\n\t\t\t\t\ttitle=\"Tests by result\"\n\t\t\t\t\tlabel=\"Results\"\n\t\t\t\t\tdataset={{ source: getPieChartDataForResults(stats) }}\n\t\t\t\t\tlegend={{ orient: 'vertical', left: 0, top: 0 }}\n\t\t\t\t\tseries={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'pie',\n\t\t\t\t\t\t\tlabel: { formatter: '{b} ({d}%)' },\n\t\t\t\t\t\t\titemStyle: {\n\t\t\t\t\t\t\t\tborderRadius: 4,\n\t\t\t\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\t\t\t\tborderColor: '#fff',\n\t\t\t\t\t\t\t\tcolor: (params) =>\n\t\t\t\t\t\t\t\t\tCOLOR_MAP.get(params.name.toLowerCase()) ?? 'blue'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tencode: {\n\t\t\t\t\t\t\t\titemName: 'name',\n\t\t\t\t\t\t\t\tvalue: 'value',\n\t\t\t\t\t\t\t\ttooltip: 'value'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"w-1/2 px-4 py-2\">\n\t\t\t\t<BarChart\n\t\t\t\t\ttitle=\"Tests by week\"\n\t\t\t\t\tdataset={{ source: getGroupedByWeek(stats) }}\n\t\t\t\t\tlegend={{}}\n\t\t\t\t\txAxis={{ type: 'time', name: 'Date' }}\n\t\t\t\t\tyAxis={[\n\t\t\t\t\t\t{ type: 'value', name: 'Results' },\n\t\t\t\t\t\t{ id: 'passrate', type: 'value', name: 'Pass rate' }\n\t\t\t\t\t]}\n\t\t\t\t\tseries={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tyAxisId: 'passrate',\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\ttooltip: { valueFormatter: (v) => `${v}%` },\n\t\t\t\t\t\t\tname: 'Pass rate',\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'passrate' },\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tname: 'OK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('ok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'ok' },\n\t\t\t\t\t\t\tstack: 'results',\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tname: 'NOK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('nok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'nok' },\n\t\t\t\t\t\t\tstack: 'results',\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tref={barRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { useEffect, useRef } from 'react';\nimport ReactEChartsCore from 'echarts-for-react/lib/core';\nimport { toast } from 'sonner';\n\nimport { BarChart, LineChart } from '@/shared/charts';\nimport { useNavigateWithProject } from '@/bublik/features/projects';\n\nimport { COLOR_MAP } from '../runs-stats.component.utils';\nimport { RunsStatsSchema, RunStats } from '../runs-stats.types';\n\nfunction useHandlePointClick() {\n\tconst navigate = useNavigateWithProject();\n\tconst ref = useRef<ReactEChartsCore>(null);\n\n\tuseEffect(() => {\n\t\tconst instance = ref.current?.getEchartsInstance();\n\t\tif (!instance) return;\n\n\t\tinstance.on('click', (params) => {\n\t\t\tconst result = RunsStatsSchema.safeParse(params.data);\n\n\t\t\tif (!result.success) {\n\t\t\t\ttoast.error('Failed to parse run stat data');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnavigate({ pathname: `/runs/${result.data.runId}` });\n\t\t});\n\t}, [navigate]);\n\n\treturn { ref };\n}\n\ninterface DaySectionProps {\n\tstats: RunStats[];\n}\n\nexport const DaySection = ({ stats }: DaySectionProps) => {\n\tconst { ref: lineRef } = useHandlePointClick();\n\tconst { ref: barRef } = useHandlePointClick();\n\n\treturn (\n\t\t<section className=\"\">\n\t\t\t<div className=\"px-4 py-2 border-b border-b-border-primary\">\n\t\t\t\t<BarChart\n\t\t\t\t\ttitle=\"Tests by day\"\n\t\t\t\t\tdataset={{ source: stats }}\n\t\t\t\t\ttooltip={{ trigger: 'axis' }}\n\t\t\t\t\tlegend={{}}\n\t\t\t\t\tdataZoom={[{}, { type: 'inside' }]}\n\t\t\t\t\txAxis={{ type: 'time', name: 'Date' }}\n\t\t\t\t\tyAxis={[\n\t\t\t\t\t\t{ type: 'value', name: 'Tests' },\n\t\t\t\t\t\t{ id: 'passrate', type: 'value', name: 'Pass rate' }\n\t\t\t\t\t]}\n\t\t\t\t\tseries={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tname: 'OK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('ok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'ok' },\n\t\t\t\t\t\t\temphasis: { focus: 'series' },\n\t\t\t\t\t\t\tstack: 'stack'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'bar',\n\t\t\t\t\t\t\tname: 'NOK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('nok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'nok' },\n\t\t\t\t\t\t\temphasis: { focus: 'series' },\n\t\t\t\t\t\t\tstack: 'stack'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tyAxisId: 'passrate',\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tname: 'Pass Rate',\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'passrate' },\n\t\t\t\t\t\t\ttooltip: { valueFormatter: (v) => `${v}%` }\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tref={barRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 py-2\">\n\t\t\t\t<LineChart\n\t\t\t\t\ttitle=\"Tests by day\"\n\t\t\t\t\tdataset={{ source: stats }}\n\t\t\t\t\ttooltip={{ trigger: 'axis' }}\n\t\t\t\t\tlegend={{}}\n\t\t\t\t\tdataZoom={[{}, { type: 'inside' }]}\n\t\t\t\t\txAxis={{ type: 'time', name: 'Date' }}\n\t\t\t\t\tyAxis={[\n\t\t\t\t\t\t{ type: 'value', name: 'Tests' },\n\t\t\t\t\t\t{ id: 'passrate', type: 'value', name: 'Pass rate' }\n\t\t\t\t\t]}\n\t\t\t\t\tseries={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tname: 'OK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('ok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'ok' },\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tname: 'NOK',\n\t\t\t\t\t\t\tcolor: COLOR_MAP.get('nok'),\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'nok' },\n\t\t\t\t\t\t\temphasis: { focus: 'series' }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tyAxisId: 'passrate',\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\tname: 'Pass Rate',\n\t\t\t\t\t\t\tencode: { x: 'date', y: 'passrate' },\n\t\t\t\t\t\t\ttooltip: { valueFormatter: (v) => `${v}%` }\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tref={lineRef}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { CardHeader, Icon, Skeleton } from '@/shared/tailwind-ui';\n\nimport { ConclusionSection, DaySection, TestsSection } from './components';\nimport { RunStats } from './runs-stats.types';\nimport { getErrorMessage } from '@/services/bublik-api';\n\nexport const RunsStatsLoading = () => {\n\treturn (\n\t\t<main className=\"flex flex-col bg-white rounded-md\">\n\t\t\t<CardHeader label=\"Runs Stats\" />\n\t\t\t<Skeleton className=\"h-screen\" />\n\t\t</main>\n\t);\n};\n\nexport const RunsStatsEmpty = () => {\n\treturn (\n\t\t<div className=\"grid place-items-center h-[calc(100vh-256px)]\">\n\t\t\t<div className=\"flex flex-col items-center text-center\">\n\t\t\t\t<Icon\n\t\t\t\t\tname=\"TriangleExclamationMark\"\n\t\t\t\t\tsize={24}\n\t\t\t\t\tclassName=\"text-text-unexpected\"\n\t\t\t\t/>\n\t\t\t\t<h3 className=\"mt-2 text-sm font-medium text-gray-900\">No results</h3>\n\t\t\t\t<p className=\"mt-1 text-sm text-gray-500\">No results found!</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\ninterface RunsStatsErrorProps {\n\terror: unknown;\n}\n\nexport const RunsStatsError = (props: RunsStatsErrorProps) => {\n\tconst { error = {} } = props;\n\tconst { title, description, status } = getErrorMessage(error);\n\n\treturn (\n\t\t<div className=\"grid place-items-center h-[calc(100vh-256px)]\">\n\t\t\t<div className=\"flex flex-col items-center text-center\">\n\t\t\t\t<Icon\n\t\t\t\t\tname=\"TriangleExclamationMark\"\n\t\t\t\t\tsize={24}\n\t\t\t\t\tclassName=\"text-text-unexpected\"\n\t\t\t\t/>\n\t\t\t\t<h3 className=\"mt-2 text-sm font-medium text-gray-900\">\n\t\t\t\t\t{status} {title}\n\t\t\t\t</h3>\n\t\t\t\t<p className=\"mt-1 text-sm text-gray-500\">{description}</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport interface RunsStatsProps {\n\tstats: RunStats[];\n}\n\nexport const RunsStats = ({ stats }: RunsStatsProps) => {\n\treturn (\n\t\t<main className=\"flex flex-col gap-1\">\n\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t<CardHeader label=\"Conclusion Stats\" />\n\t\t\t\t<ConclusionSection stats={stats} />\n\t\t\t</div>\n\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t<CardHeader label=\"Tests Stats\" />\n\t\t\t\t<TestsSection stats={stats} />\n\t\t\t</div>\n\t\t\t<div className=\"bg-white rounded-md\">\n\t\t\t\t<CardHeader label=\"Day Stats\" />\n\t\t\t\t<DaySection stats={stats} />\n\t\t\t</div>\n\t\t</main>\n\t);\n};\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2021-2023 OKTET Labs Ltd. */\nimport { cn } from '@/shared/tailwind-ui';\n\nimport { useRunsStats } from './runs-stats.hooks';\nimport {\n\tRunsStats,\n\tRunsStatsEmpty,\n\tRunsStatsError,\n\tRunsStatsLoading\n} from './runs-stats.component';\n\nexport const RunsStatsContainer = () => {\n\tconst { stats, isLoading, error, isFetching } = useRunsStats();\n\n\tif (error) return <RunsStatsError error={error} />;\n\n\tif (isLoading) return <RunsStatsLoading />;\n\n\tif (!stats || !stats.length) return <RunsStatsEmpty />;\n\n\treturn (\n\t\t<div className={cn(isFetching && 'opacity-40 pointer-events-none')}>\n\t\t\t<RunsStats stats={stats} />\n\t\t</div>\n\t);\n};\n"],"names":["startOfWeek","dirtyDate","options","_ref","_ref2","_ref3","_options$weekStartsOn","_defaultOptions$local","_defaultOptions$local2","requiredArgs","defaultOptions","getDefaultOptions","weekStartsOn","toInteger","date","toDate","day","diff","useRunsStats","searchQuery","useRunsQuery","query","useGetRunsTablePageQuery","calculatedQuery","skipToken","finalQuery","data","useMemo","stats","start","conclusion","id","COLOR_MAP","getPieChartDataForResults","runStats","calcTotal","key","acc","curr","ok","nok","getPieChartDataByRunStatus","groupedByStatus","groupBy","status","label","getRunStatusInfo","getGroupedByWeek","groupedBy","nokNumber","totalNumber","okNumber","s","getRunStatus","group","grouped","runStatusByWeek","runStatuses","uniqueRunStatuses","result","RUN_STATUS","c","runStatus","v","presentStatuses","st","RunsListModal","ids","open","onOpenChange","queryData","filteredResults","f","Dialog","jsxs","ModalContent","jsx","Icon","RunsListModalItemContainer","runId","useGetRunDetailsQuery","Skeleton","bg","color","icon","cn","RunLinks","ConclusionSection","statuses","pieData","pieRef","useRef","barRef","isModalOpen","setIsModalOpen","useState","runIds","setRunIds","handleOpenChange","handlePieChartClick","useCallback","params","handleBarChartClick","rawIds","GroupedStatsSchema","allIdsInGroup","clickedStatus","filteredIds","useEffect","PieChart","BarChart","bgRaw","TestsSection","TestByWeekDaySchema","useHandlePointClick","navigate","useNavigateWithProject","ref","instance","RunsStatsSchema","toast","DaySection","lineRef","LineChart","RunsStatsLoading","CardHeader","RunsStatsEmpty","RunsStatsError","props","error","title","description","getErrorMessage","RunsStats","RunsStatsContainer","isLoading","isFetching"],"mappings":"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","x_google_ignoreList":[0]}