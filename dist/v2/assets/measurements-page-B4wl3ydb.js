import{j as e}from"./shiki-CtY5KH0E.js";import{C as x,j as E,L,I as j,r as P,ai as R,s as b,aj as O,ak as B,al as D,p as C,i as m,am as v,b as _,w as H,an as Q,ao as h,ap as W,aq as k,ar as M,as as g,o as F,at as G,au as U,av as q,aw as K,y as Y,ah as J,ax as V,ay as X,az as Z,aA as $}from"./index-rCMhFuXx.js";import{j as u,e as ee,i as se,a as re}from"./react-BSMx3yqy.js";import{I as ae,E as te,S as ne}from"./selected-charts.component-CqeB5_H5.js";import"./reactJsonView-KCeSiE7A.js";import"./echarts-lseLLy92.js";import"./monaco-CdFZwoqU.js";import"./prettier-BE4rBlSX.js";const y=({children:r})=>e.jsx(x,{label:"Tables",children:e.jsx("div",{className:"flex items-center gap-4",children:r})});function z(r){const{runId:s,targetIterationId:a}=r;return e.jsx(E,{asChild:!0,variant:"secondary",size:"xss",children:e.jsxs(L,{to:P.run({runId:s,targetIterationId:a}),children:[e.jsx(j,{name:"BoxArrowRight",className:"mr-1.5"}),"Run"]})})}const A=({runId:r,resultId:s})=>e.jsx(E,{asChild:!0,variant:"secondary",size:"xss",children:e.jsxs(L,{to:P.log({runId:r,focusId:s}),children:[e.jsx(j,{name:"BoxArrowRight",className:"mr-1.5"}),"Log"]})}),le=({runId:r,resultId:s,path:a})=>e.jsxs("div",{className:"flex-shrink-0 w-full bg-white rounded-md",children:[e.jsx(x,{label:"Test result",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{runId:r,targetIterationId:Number(s)}),e.jsx(B,{runId:Number(r),resultId:Number(s),path:a}),e.jsx(A,{runId:r,resultId:s})]})}),e.jsx("div",{className:"py-2.5 px-4",children:e.jsx(m,{className:"w-full h-full min-h-[86px] rounded"})})]}),ie=({error:r={}})=>{const{status:s,title:a,description:t}=C(r);return e.jsxs("div",{className:"flex-shrink-0 w-full bg-white rounded-md",children:[e.jsx(x,{label:"Test result",children:e.jsx("div",{className:"flex items-center gap-3"})}),e.jsx("div",{className:"py-2.5 px-4",children:e.jsx("div",{className:"flex items-center justify-center min-h-[140px]",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(j,{name:"TriangleExclamationMark",size:48,className:"text-text-unexpected"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[s," ",a]}),e.jsx("p",{children:t})]})]})})})]})},de=()=>e.jsx("div",{children:"No data"}),N=()=>{const{resultId:r,runId:s}=u(),{data:a,isLoading:t,error:l}=R(r??b),{node:d}=O(s??b,{selectFromResult:c=>({node:!c.data||!r?void 0:c.data.tree[r]})});if(!r||!s)return e.jsx("div",{children:"No run id or result id"});if(l)return e.jsx(ie,{error:l});if(t)return e.jsx(le,{runId:s,resultId:r,path:d?.path??void 0});if(!a)return e.jsx(de,{});const{name:i,obtained_result:{result_type:o},parameters:f,has_error:n}=a;return e.jsxs("div",{className:"flex-shrink-0 w-full bg-white rounded-md",children:[e.jsx(x,{label:"Test result",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{runId:s,targetIterationId:Number(r)}),e.jsx(B,{runId:Number(s),resultId:Number(r),path:d?.path??void 0}),e.jsx(A,{runId:s,resultId:r}),e.jsx(D,{})]})}),e.jsx("div",{className:"py-2.5 px-4",children:e.jsx(ae,{name:i,obtainedResult:o,parameters:f,isError:n})})]})};function w({resultId:r}){const{data:s,isError:a,isLoading:t}=v(r);return e.jsx(te,{plots:s?.charts,disabled:a,isLoading:t})}const ce="selectedCharts";function I(){const r=ee(),[s]=se(),[a=[],t]=_(ce,H(Q,[])),l=()=>{const n=new URLSearchParams(s);n.set("mode",h.Overlay),r({search:n.toString()})};function d(n){t(c=>[...c||[],n])}function i(n){t(c=>(c||[]).filter(p=>p!==n))}function o(){t([])}function f(n){a.includes(n.id)?i(n.id):d(n.id)}return{selectedCharts:a,addChart:d,removeChart:i,resetCharts:o,handleChartClick:f,handleOpenButtonClick:l}}const oe=()=>e.jsx("div",{children:"Chart is empty"}),xe=({layout:r})=>e.jsxs("ul",{className:r==="mosaic"?"chart-mosaic":void 0,children:[e.jsx("li",{className:"py-2.5 px-4",children:e.jsx(m,{className:"h-[334px] rounded"})}),e.jsx("li",{className:"py-2.5 px-4",children:e.jsx(m,{className:"h-[334px] rounded"})}),e.jsx("li",{className:"py-2.5 px-4",children:e.jsx(m,{className:"h-[334px] rounded"})}),e.jsx("li",{className:"py-2.5 px-4",children:e.jsx(m,{className:"h-[334px] rounded"})})]});function ue({error:r={}}){const{status:s,title:a,description:t}=C(r);return e.jsxs("div",{className:"flex items-center justify-center gap-4 mx-4 my-20",children:[e.jsx(j,{name:"TriangleExclamationMark",size:48,className:"text-text-unexpected"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[s," ",a]}),e.jsx("p",{children:t})]})]})}function T(r){const{resultId:s,layout:a}=r,{isSidebarOpen:t}=W(),{data:l,isLoading:d,error:i}=v(s),{selectedCharts:o,handleChartClick:f}=I();return d?e.jsx(xe,{layout:a}):i?e.jsx(ue,{error:i}):l?a==="mosaic"?e.jsx("div",{className:F("[&>li]:border-b [&>li]:border-border-primary",t?"min-[1465px]:chart-mosaic":"min-[1368px]:chart-mosaic"),children:l.charts.map((n,c)=>{const p=o.includes(n.id)?"active":"default";return e.jsx("div",{className:"py-2.5 px-4",children:e.jsx(k,{chart:n,color:g(c),additionalToolBarItems:e.jsx(M,{"aria-label":"Add to combined chart",state:p,onClick:()=>f(n),children:e.jsx(j,{name:"AddSymbol",className:"size-5"})})},n.id)},n.id)})}):e.jsx("div",{className:"flex flex-col children-but-last:border-b children-but-last:border-b-border-primary",children:l.charts.map((n,c)=>{const p=o.includes(n.id)?"active":"default";return e.jsx("div",{className:"py-2.5 px-4",children:e.jsx(k,{chart:n,color:g(c),additionalToolBarItems:e.jsx(M,{"aria-label":"Add to combined chart",state:p,onClick:()=>f(n),children:e.jsx(j,{name:"AddSymbol",className:"size-5"})})},n.id)},n.id)})}):e.jsx(oe,{})}const he=()=>e.jsx("div",{className:"p-4",children:e.jsx(m,{className:"w-full min-h-[700px] rounded"})}),me=()=>e.jsx("div",{children:"Table is empty"}),je=({error:r})=>{const{status:s,title:a,description:t}=C(r);return e.jsxs("div",{className:"flex items-center justify-center gap-4 mx-4 my-20",children:[e.jsx(j,{name:"TriangleExclamationMark",size:48,className:"text-text-unexpected"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[s," ",a]}),e.jsx("p",{children:t})]})]})};function S(r){const{resultId:s}=r,{data:a,isLoading:t,error:l}=v(s);return t?e.jsx(he,{}):l?e.jsx(je,{error:l}):a?e.jsx("div",{className:"",children:e.jsx(G,{data:a.tables})}):e.jsx(me,{})}function fe(){const{runId:r,resultId:s}=u();return!r||!s?null:e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{}),e.jsxs("div",{className:"relative transition-all bg-white rounded-md",children:[e.jsx(x,{label:"Charts"}),e.jsx(T,{layout:"mosaic",resultId:s})]}),e.jsxs("div",{className:"bg-white rounded-md",children:[e.jsx(y,{children:e.jsx(w,{resultId:s})}),e.jsx(S,{resultId:s})]})]})})}const pe=()=>{const{runId:r,resultId:s}=u();return!r||!s?null:e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{}),e.jsxs("div",{className:"bg-white rounded-md",children:[e.jsx(x,{label:"Charts"}),e.jsx(T,{resultId:s,layout:"row"})]})]})})},ve=()=>{const{runId:r,resultId:s}=u();return!r||!s?null:e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{}),e.jsxs("div",{className:"bg-white rounded-md",children:[e.jsx(y,{children:e.jsx(w,{resultId:s})}),e.jsx(S,{resultId:s})]})]})})},Ne=()=>{const{runId:r,resultId:s}=u();return!r||!s?null:e.jsx("div",{className:"h-screen p-2 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full gap-1",children:[e.jsx(N,{}),e.jsxs("div",{className:"flex gap-1 overflow-hidden",children:[e.jsx(U,{...q,defaultSize:{width:"50%",height:"100%"},enable:{right:!0},maxWidth:"70%",minWidth:500,children:e.jsxs("div",{className:"flex flex-col flex-grow w-full h-full overflow-hidden bg-white rounded-md",children:[e.jsx(x,{label:"Charts"}),e.jsx("div",{className:"overflow-x-hidden overflow-y-auto no-bg-scrollbar",children:e.jsx(T,{layout:"row",resultId:s})})]})}),e.jsxs("div",{className:"flex flex-col flex-grow w-full h-full overflow-hidden bg-white rounded-md",children:[e.jsx(y,{children:e.jsx(w,{resultId:s})}),e.jsx("div",{className:"overflow-x-hidden overflow-y-auto no-bg-scrollbar",children:e.jsx(S,{resultId:s})})]})]})]})})};function be(){const{runId:r,resultId:s}=u();return!r||!s?null:e.jsx("div",{className:"p-2 h-full",children:e.jsxs("div",{className:"flex flex-col gap-1 h-full",children:[e.jsx(N,{}),e.jsxs("div",{className:"relative transition-all bg-white rounded-md h-[120vh]",children:[e.jsx(x,{label:"Charts"}),e.jsx("div",{className:"h-full p-4",children:e.jsx(ge,{resultId:s})})]})]})})}function ge({resultId:r}){const{data:s,isLoading:a,error:t}=v(r),{selectedCharts:l}=I(),d=re.useMemo(()=>l.length?s?.charts?.filter(i=>l.includes(i.id)):s?.charts,[s?.charts,l]);return t?e.jsx("div",{children:"Error..."}):a?e.jsx("div",{className:"p-2 h-full",children:e.jsx(m,{className:"h-full rounded-md"})}):!s||!d?.length?e.jsx("div",{children:"No Data!"}):e.jsx(K,{charts:d,style:{height:"100%"}})}const Ce={[h.Charts]:pe,[h.Split]:Ne,[h.Tables]:ve,[h.Overlay]:be,[h.Default]:fe},ye=({mode:r})=>{const s=Ce[r??h.Default];return e.jsxs(e.Fragment,{children:[e.jsx(s,{}),e.jsx(we,{})]})};function we(){const{resultId:r}=u(),{selectedCharts:s,resetCharts:a,removeChart:t,handleOpenButtonClick:l}=I(),{data:d}=v(r??b);return e.jsx(ne,{open:!!s.length,label:"Combined",plots:d?.charts?.filter(i=>s.includes(i.id))?.map((i,o)=>({plot:i,color:g(o)}))??[],onResetButtonClick:a,onRemoveClick:i=>t(i.id),onOpenButtonClick:l})}const Ie=({name:r,start:s,runId:a})=>{const t=s?Y(s):"";J([r,t,a,"Measurements - Bublik"])},Te=()=>{const[r]=V(),{runId:s,resultId:a}=u(),{data:t}=R(a??b);return Ie({name:t?.name,start:t?.start,runId:s}),X({runId:s}),Z({runId:s,resultId:a}),e.jsxs(e.Fragment,{children:[e.jsx(ye,{mode:r?.mode}),e.jsx($,{})]})},ze=()=>e.jsx(Te,{});export{ze as MeasurementsPage};
//# sourceMappingURL=measurements-page-B4wl3ydb.js.map
