{"version":3,"file":"run-report.page-HFqOSER-.js","sources":["../../../bublik-ui/libs/bublik/features/run-report/src/lib/run-report-stacked/run-report-stacked-selected.component.tsx","../../../bublik-ui/libs/bublik/features/run-report/src/lib/run-report-stacked/run-report-stacked-selected.container.tsx","../../../bublik-ui/libs/bublik/features/run-report/src/lib/run-report-stacked/run-report-stacked-chart.container.tsx","../../../bublik-ui/libs/bublik/features/run-report/src/lib/run-report.container.tsx","../../../bublik-ui/apps/bublik/src/pages/run-report/run-report.page.tsx"],"sourcesContent":["/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2024-2025 OKTET LTD */\nimport { ButtonTw, Icon, Tooltip } from '@/shared/tailwind-ui';\nimport { AnimatePresence, motion, Transition, Variants } from 'framer-motion';\n\nconst variants: Variants = {\n\tvisible: { opacity: 1, y: '0%' },\n\thidden: { opacity: 0, y: '100%' },\n\texit: { opacity: 0, y: '100%' }\n};\n\nconst transition: Transition = { bounce: 0.1 };\n\ninterface SelectedItem {\n\tid: string;\n\tlabel: string;\n}\n\ninterface RunReportStackedSelectedProps {\n\titems?: SelectedItem[];\n\tonResetClick?: () => void;\n\tonRemoveClick?: (id: string) => void;\n\tonOpenClick?: () => void;\n}\n\nfunction RunReportStackedSelected(props: RunReportStackedSelectedProps) {\n\tconst { items = [], onResetClick, onRemoveClick, onOpenClick } = props;\n\n\tconst isPopoverVisible = items.length;\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{isPopoverVisible ? (\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={variants}\n\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\texit=\"exit\"\n\t\t\t\t\ttransition={transition}\n\t\t\t\t\tclassName=\"fixed bottom-4 z-50 right-4 bg-white rounded-lg shadow-popover min-w-[360px] max-h-[90vh] flex flex-col\"\n\t\t\t\t\tlayout=\"size\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex flex-col gap-2 px-4 pt-2 flex-1 overflow-auto\">\n\t\t\t\t\t\t<h1 className=\"text-[0.875rem] leading-[1.125rem] font-semibold mb-2\">\n\t\t\t\t\t\t\tSelected Charts\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t<ul className=\"flex flex-col gap-2 mb-4\">\n\t\t\t\t\t\t\t{items.map((item) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center gap-2 justify-between p-2 border rounded border-border-primary hover:bg-gray-50\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-[0.6875rem] font-medium leading-[0.875rem]\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item.label}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tcontent=\"Remove from stacked\"\n\t\t\t\t\t\t\t\t\t\t\tdisableHoverableContent\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Remove from stacked\"\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"grid transition-colors rounded place-items-center text-text-unexpected hover:bg-red-100\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => onRemoveClick?.(item.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"CrossSimple\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"size-5 translate-y-[2px]\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex flex-col gap-2 px-4 py-2 mt-2 border-t border-border-primary\">\n\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t<ButtonTw\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\trounded=\"lg\"\n\t\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t\tclassName=\"w-full justify-center\"\n\t\t\t\t\t\t\t\tonClick={onOpenClick}\n\t\t\t\t\t\t\t\tdisabled={items.length <= 1}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name=\"LineChartMultiple\" className=\"size-6 mr-2\" />\n\t\t\t\t\t\t\t\t<span>Stacked</span>\n\t\t\t\t\t\t\t</ButtonTw>\n\t\t\t\t\t\t\t<ButtonTw\n\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\trounded=\"lg\"\n\t\t\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\t\t\tclassName=\"w-full justify-center\"\n\t\t\t\t\t\t\t\tonClick={onResetClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>Reset</span>\n\t\t\t\t\t\t\t</ButtonTw>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</motion.div>\n\t\t\t) : null}\n\t\t</AnimatePresence>\n\t);\n}\n\nexport { RunReportStackedSelected };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2024-2025 OKTET LTD */\nimport { RunReportStackedSelected } from './run-report-stacked-selected.component';\nimport { useRunReportStacked } from './run-report-stacked.hooks';\n\nfunction RunReportStackedSelectedContainer() {\n\tconst { selectedRecords, clearIds, removeId, toggleStacked } =\n\t\tuseRunReportStacked();\n\n\tconst items = selectedRecords.map((r) => ({\n\t\tid: r.id,\n\t\tlabel: r.measurement.label ?? ''\n\t}));\n\n\treturn (\n\t\t<RunReportStackedSelected\n\t\t\titems={items}\n\t\t\tonResetClick={clearIds}\n\t\t\tonRemoveClick={removeId}\n\t\t\tonOpenClick={() => toggleStacked(true)}\n\t\t/>\n\t);\n}\n\nexport { RunReportStackedSelectedContainer };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2024-2025 OKTET LTD */\nimport {\n\tCardHeader,\n\tDrawerContent,\n\tDrawerRoot,\n\tcn\n} from '@/shared/tailwind-ui';\nimport { ReportChart } from '@/shared/types';\nimport { EChartsOption, Plot } from '@/shared/charts';\n\nimport { useRunReportStacked } from './run-report-stacked.hooks';\n\ntype ChartWithContext = {\n\tchart: ReportChart;\n\targsVals?: Record<string, string | number>;\n\tmeasurementLabel: string;\n};\n\nfunction getDifferingParams(\n\tchartsWithContext: ChartWithContext[]\n): Set<string> {\n\tconst allArgsVals = chartsWithContext\n\t\t.map((c) => c.argsVals)\n\t\t.filter((args): args is Record<string, string | number> => !!args);\n\n\tif (allArgsVals.length <= 1) return new Set();\n\n\tconst differingParams = new Set<string>();\n\tconst firstArgs = allArgsVals[0];\n\tconst allKeys = new Set(allArgsVals.flatMap((args) => Object.keys(args)));\n\n\tallKeys.forEach((key) => {\n\t\tconst firstValue = firstArgs[key];\n\t\tconst hasDifferentValue = allArgsVals.some(\n\t\t\t(args) => args[key] !== firstValue\n\t\t);\n\t\tif (hasDifferentValue) differingParams.add(key);\n\t});\n\n\treturn differingParams;\n}\n\nfunction formatDifferingParams(\n\targsVals: Record<string, string | number> | undefined,\n\tdifferingParams: Set<string>\n): string {\n\tif (!argsVals || differingParams.size === 0) return '';\n\n\tconst parts: string[] = [];\n\tdifferingParams.forEach((key) => {\n\t\tif (key in argsVals) {\n\t\t\tparts.push(`${key}: ${argsVals[key]}`);\n\t\t}\n\t});\n\n\treturn parts.length > 0 ? parts.join(' | ') : '';\n}\n\nfunction createStackedOptions(records: ChartWithContext[]): EChartsOption {\n\tconst axisLabelStyles = {\n\t\tfontFamily: 'Inter',\n\t\tfontSize: 10,\n\t\tfontWeight: 500,\n\t\tlineHeight: 18\n\t};\n\n\tconst charts = records.map((c) => c.chart);\n\tconst differingParams = getDifferingParams(records);\n\n\tconst yAxisGroups = new Map<string, number>();\n\tconst yAxisConfigs: EChartsOption['yAxis'] = [];\n\n\tcharts.forEach((chart) => {\n\t\tconst yLabel = chart.axis_y.label;\n\t\tif (!yAxisGroups.has(yLabel)) {\n\t\t\tconst idx = yAxisConfigs.length;\n\t\t\tyAxisGroups.set(yLabel, idx);\n\t\t\tyAxisConfigs.push({\n\t\t\t\ttype: 'value',\n\t\t\t\tname: yLabel,\n\t\t\t\tnameGap: 20,\n\t\t\t\tnameLocation: 'end',\n\t\t\t\tposition: idx === 0 ? 'left' : 'right',\n\t\t\t\toffset: idx <= 1 ? 0 : (idx - 1) * 120,\n\t\t\t\taxisLine: { show: true },\n\t\t\t\taxisTick: { show: true },\n\t\t\t\tscale: true\n\t\t\t});\n\t\t}\n\t});\n\n\tlet datasetIdCounter = 0;\n\tconst datasets: EChartsOption['dataset'] = [];\n\tconst seriesConfigs: EChartsOption['series'] = [];\n\n\tconst measurementLabelCounts = new Map<string, number>();\n\trecords.forEach((record) => {\n\t\tconst count = measurementLabelCounts.get(record.measurementLabel) || 0;\n\t\tmeasurementLabelCounts.set(record.measurementLabel, count + 1);\n\t});\n\n\tcharts.forEach((chart, chartIdx) => {\n\t\tconst yAxisIndex = yAxisGroups.get(chart.axis_y.label) ?? 0;\n\t\tconst chartContext = records[chartIdx];\n\t\tconst paramLabel = formatDifferingParams(\n\t\t\tchartContext.argsVals,\n\t\t\tdifferingParams\n\t\t);\n\n\t\tchart.data.forEach((seriesData) => {\n\t\t\tconst datasetId = `dataset_${datasetIdCounter++}`;\n\n\t\t\tdatasets.push({\n\t\t\t\tid: datasetId,\n\t\t\t\tsource: seriesData.points.map((point) => ({\n\t\t\t\t\t[chart.axis_x.key]: Number(point.x_value),\n\t\t\t\t\t[chart.axis_y.key]: Number(point.y_value),\n\t\t\t\t\titeration_id: point.metadata?.iteration_id ?? 0,\n\t\t\t\t\tresult_id: point.metadata?.result_id ?? 0\n\t\t\t\t}))\n\t\t\t});\n\n\t\t\tlet seriesName: string;\n\t\t\tconst labelCount = measurementLabelCounts.get(\n\t\t\t\tchartContext.measurementLabel\n\t\t\t);\n\n\t\t\tif (chart.data.length > 1 && chart.series_label) {\n\t\t\t\t// Multiple series with label: \"series_label: series - y_axis_label (params)\"\n\t\t\t\tconst baseName = `${chart.series_label}: ${seriesData.series} - ${chart.axis_y.label}`;\n\t\t\t\tseriesName = paramLabel ? `${baseName} (${paramLabel})` : baseName;\n\t\t\t} else if (chart.data.length > 1) {\n\t\t\t\t// Multiple series without label: \"series - y_axis_label (params)\"\n\t\t\t\tconst baseName = `${seriesData.series} - ${chart.axis_y.label}`;\n\t\t\t\tseriesName = paramLabel ? `${baseName} (${paramLabel})` : baseName;\n\t\t\t} else {\n\t\t\t\tif (paramLabel && labelCount && labelCount <= 1) {\n\t\t\t\t\t// Single chart but with params to show\n\t\t\t\t\tseriesName = `${chart.axis_y.label} (${paramLabel})`;\n\t\t\t\t}\n\n\t\t\t\t// Single series: use differing params if available to differentiate\n\t\t\t\telse if (labelCount && labelCount > 1) {\n\t\t\t\t\t// Multiple charts with same measurement label - need to differentiate\n\t\t\t\t\tif (paramLabel) {\n\t\t\t\t\t\tseriesName = `${chartContext.measurementLabel} (${paramLabel})`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tseriesName = `${chartIdx} - ${chartContext.measurementLabel}`;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tchartContext.measurementLabel &&\n\t\t\t\t\tchartContext.measurementLabel !== chart.axis_y.label\n\t\t\t\t) {\n\t\t\t\t\tseriesName = chartContext.measurementLabel;\n\t\t\t\t} else {\n\t\t\t\t\tseriesName = chart.axis_y.label;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tseriesConfigs.push({\n\t\t\t\ttype: 'line',\n\t\t\t\tname: seriesName,\n\t\t\t\tdatasetId: datasetId,\n\t\t\t\tyAxisIndex: yAxisIndex,\n\t\t\t\tencode: { x: chart.axis_x.key, y: chart.axis_y.key },\n\t\t\t\tsmooth: false,\n\t\t\t\tshowSymbol: true,\n\t\t\t\tsymbolSize: 6\n\t\t\t});\n\t\t});\n\t});\n\n\tconst options: EChartsOption = {\n\t\tdataset: datasets,\n\t\txAxis: {\n\t\t\ttype: 'value',\n\t\t\tname: charts[0]?.axis_x.label || 'X Axis',\n\t\t\tnameLocation: 'middle',\n\t\t\tnameGap: 20,\n\t\t\tnameTextStyle: axisLabelStyles,\n\t\t\taxisLabel: axisLabelStyles\n\t\t},\n\t\tyAxis: yAxisConfigs.map((config) => ({\n\t\t\t...config,\n\t\t\taxisLabel: axisLabelStyles,\n\t\t\tnameTextStyle: { ...axisLabelStyles, align: 'left' }\n\t\t})),\n\t\tseries: seriesConfigs,\n\t\tdataZoom: [\n\t\t\t{ type: 'inside', xAxisIndex: [0] },\n\t\t\t{ type: 'inside', yAxisIndex: charts.map((_, i) => i) },\n\t\t\t{ type: 'slider', xAxisIndex: [0], bottom: 10 }\n\t\t],\n\t\tgrid: {\n\t\t\ttop: '12%',\n\t\t\tleft: '5%',\n\t\t\tright:\n\t\t\t\tyAxisConfigs.length > 1\n\t\t\t\t\t? `${8 * (yAxisConfigs.length - 1) + 5}%`\n\t\t\t\t\t: '5%',\n\t\t\tbottom: '9%'\n\t\t},\n\t\ttooltip: {\n\t\t\ttrigger: 'axis',\n\t\t\textraCssText: 'shadow-popover rounded-lg',\n\t\t\ttextStyle: axisLabelStyles,\n\t\t\taxisPointer: { type: 'line' },\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\tformatter: (params: any) => {\n\t\t\t\tif (!Array.isArray(params) || params.length === 0) return '';\n\n\t\t\t\t// Get x value - it could be at different positions\n\t\t\t\tconst firstParam = params[0];\n\t\t\t\tconst xValue =\n\t\t\t\t\tfirstParam.value?.x_value ??\n\t\t\t\t\tfirstParam.value?.[0] ??\n\t\t\t\t\tfirstParam.axisValue;\n\t\t\t\tlet tooltip = `<strong>${charts[0].axis_x.label}: ${xValue}</strong><br/>`;\n\n\t\t\t\tparams.forEach((param: any) => {\n\t\t\t\t\t// Try multiple ways to get the y value\n\t\t\t\t\tlet yValue;\n\t\t\t\t\tif (param.value && typeof param.value === 'object') {\n\t\t\t\t\t\tyValue =\n\t\t\t\t\t\t\tparam.value.y_value ?? param.value[1] ?? param.data?.y_value;\n\t\t\t\t\t} else if (Array.isArray(param.value)) {\n\t\t\t\t\t\tyValue = param.value[1];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tyValue = param.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst formattedValue =\n\t\t\t\t\t\ttypeof yValue === 'number'\n\t\t\t\t\t\t\t? yValue.toLocaleString(undefined, { maximumFractionDigits: 2 })\n\t\t\t\t\t\t\t: yValue;\n\n\t\t\t\t\ttooltip += `${param.marker} ${param.seriesName}: <strong>${formattedValue}</strong><br/>`;\n\t\t\t\t});\n\n\t\t\t\treturn tooltip;\n\t\t\t}\n\t\t},\n\t\tlegend: {\n\t\t\ttop: '1%',\n\t\t\tleft: 'left',\n\t\t\ttype: 'scroll',\n\t\t\tanimationDurationUpdate: 200,\n\t\t\tpageButtonPosition: 'start'\n\t\t}\n\t};\n\n\treturn options;\n}\n\nfunction RunReportStackedChartContainer() {\n\tconst { selectedRecords, isStackedOpen, toggleStacked } =\n\t\tuseRunReportStacked();\n\n\tconst charts: ChartWithContext[] = selectedRecords.reduce<ChartWithContext[]>(\n\t\t(acc, r) => {\n\t\t\tif (!r?.chart) return acc;\n\n\t\t\tacc.push({\n\t\t\t\tchart: r.chart,\n\t\t\t\targsVals: r.argsVals.args_vals,\n\t\t\t\tmeasurementLabel: r.measurement.label\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t},\n\t\t[]\n\t);\n\n\tif (!charts.length) return null;\n\n\treturn (\n\t\t<DrawerRoot open={isStackedOpen} onOpenChange={toggleStacked}>\n\t\t\t<DrawerContent\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'bg-white shadow-popover flex flex-col overflow-hidden w-[80vw] max-w-[80vw]'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<CardHeader label=\"Stacked Chart\" />\n\t\t\t\t<div className=\"p-1 flex-1\">\n\t\t\t\t\t<Plot\n\t\t\t\t\t\toptions={createStackedOptions(charts)}\n\t\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</DrawerContent>\n\t\t</DrawerRoot>\n\t);\n}\n\nexport { RunReportStackedChartContainer };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2024 OKTET LTD */\nimport {\n\tuseGetRunDetailsQuery,\n\tuseGetRunReportQuery\n} from '@/services/bublik-api';\nimport { skipToken } from '@reduxjs/toolkit/query';\n\nimport {\n\tRunReport,\n\tRunReportEmpty,\n\tRunReportError,\n\tRunReportLoading\n} from './run-report.component';\n\ninterface UseReportOptions {\n\trunId: number;\n\tconfigId: number;\n}\n\nfunction useReportData({ runId, configId }: UseReportOptions) {\n\tconst { data, isLoading, error } = useGetRunReportQuery(\n\t\tconfigId && runId ? { configId, runId } : skipToken\n\t);\n\tconst {\n\t\tdata: details,\n\t\tisLoading: isDetailsLoading,\n\t\terror: detailsError\n\t} = useGetRunDetailsQuery(runId ?? skipToken);\n\n\treturn {\n\t\tisLoading: isLoading || isDetailsLoading,\n\t\tdetails: details,\n\t\tblocks: data,\n\t\terror: error ?? detailsError\n\t};\n}\n\ninterface RunReportContainerProps {\n\trunId: number;\n\tconfigId: number;\n}\n\nfunction RunReportContainer(props: RunReportContainerProps) {\n\tconst { runId, configId } = props;\n\n\tconst { details, blocks, error, isLoading } = useReportData({\n\t\trunId,\n\t\tconfigId\n\t});\n\n\tif (isLoading) return <RunReportLoading />;\n\n\tif (error) return <RunReportError error={error} />;\n\n\tif (!blocks || !details) return <RunReportEmpty />;\n\n\treturn <RunReport runId={Number(runId)} blocks={blocks} details={details} />;\n}\n\nexport { RunReportContainer };\n","/* SPDX-License-Identifier: Apache-2.0 */\n/* SPDX-FileCopyrightText: 2024 OKTET LTD */\nimport { skipToken } from '@reduxjs/toolkit/query';\nimport { useParams, useSearchParams } from 'react-router-dom';\n\nimport {\n\tReportStackedContextProvider,\n\tRunReportContainer,\n\tRunReportStackedSelectedContainer,\n\tRunReportStackedChartContainer\n} from '@/bublik/features/run-report';\nimport { formatTimeToDot } from '@/shared/utils';\nimport { useGetRunDetailsQuery } from '@/services/bublik-api';\n\nimport { useTabTitleWithPrefix } from '@/bublik/features/projects';\n\nfunction RunReportPage() {\n\tconst [searchParams] = useSearchParams();\n\tconst { runId } = useParams<{ runId: string }>();\n\tconst configId = searchParams.get('config');\n\tuseRunReportPageName({ runId: runId ? Number(runId) : undefined });\n\n\tif (!configId) {\n\t\treturn <div className=\"flex flex-col gap-1 p-2\">No config id found!</div>;\n\t}\n\n\tif (!runId) {\n\t\treturn <div className=\"flex flex-col gap-1 p-2\">No run id found!</div>;\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-1 p-2\">\n\t\t\t<ReportStackedContextProvider\n\t\t\t\trunId={Number(runId)}\n\t\t\t\tconfigId={Number(configId)}\n\t\t\t>\n\t\t\t\t<RunReportContainer runId={Number(runId)} configId={Number(configId)} />\n\t\t\t\t<RunReportStackedSelectedContainer />\n\t\t\t\t<RunReportStackedChartContainer />\n\t\t\t</ReportStackedContextProvider>\n\t\t</div>\n\t);\n}\n\ninterface UseRunReportPageNameConfig {\n\trunId?: number;\n}\n\nfunction useRunReportPageName({ runId }: UseRunReportPageNameConfig) {\n\tconst { data: details } = useGetRunDetailsQuery(runId ?? skipToken);\n\n\tlet title = 'Report - Bublik';\n\n\tif (runId && details) {\n\t\tconst { main_package: name, start } = details;\n\t\tconst formattedTime = formatTimeToDot(start);\n\t\ttitle = `${name} | ${formattedTime} | ${runId} | Report - Bublik`;\n\t}\n\n\tuseTabTitleWithPrefix(title);\n}\n\nexport { RunReportPage };\n"],"names":["variants","transition","RunReportStackedSelected","props","items","onResetClick","onRemoveClick","onOpenClick","isPopoverVisible","jsx","AnimatePresence","jsxs","motion","item","Tooltip","Icon","ButtonTw","RunReportStackedSelectedContainer","selectedRecords","clearIds","removeId","toggleStacked","useRunReportStacked","r","getDifferingParams","chartsWithContext","allArgsVals","c","args","differingParams","firstArgs","key","firstValue","formatDifferingParams","argsVals","parts","createStackedOptions","records","axisLabelStyles","charts","yAxisGroups","yAxisConfigs","chart","yLabel","idx","datasetIdCounter","datasets","seriesConfigs","measurementLabelCounts","record","count","chartIdx","yAxisIndex","chartContext","paramLabel","seriesData","datasetId","point","seriesName","labelCount","baseName","config","_","i","params","firstParam","xValue","tooltip","param","yValue","formattedValue","RunReportStackedChartContainer","isStackedOpen","acc","DrawerRoot","DrawerContent","cn","CardHeader","Plot","useReportData","runId","configId","data","isLoading","error","useGetRunReportQuery","skipToken","details","isDetailsLoading","detailsError","useGetRunDetailsQuery","RunReportContainer","blocks","RunReportLoading","RunReportError","RunReportEmpty","RunReport","RunReportPage","searchParams","useSearchParams","useParams","useRunReportPageName","ReportStackedContextProvider","title","name","start","formattedTime","formatTimeToDot","useTabTitleWithPrefix"],"mappings":"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"}